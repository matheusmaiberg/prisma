(()=>{var e={123:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},i(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),o=0;o<n.length;o++)"default"!==n[o]&&r(t,e,n[o]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.HooksExplorerProvider=void 0;const a=o(n(1398)),c=o(n(6928)),l=o(n(9896));t.HooksExplorerProvider=class{context;_onDidChangeTreeData=new a.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;isLoading=!1;constructor(e){this.context=e,this.isLoading=!0,this.loadHooks().then(()=>{this.isLoading=!1,this._onDidChangeTreeData.fire()})}refresh(){this.isLoading=!0,this._onDidChangeTreeData.fire(),this.loadHooks().then(()=>{this.isLoading=!1,this._onDidChangeTreeData.fire()})}async loadHooks(){await new Promise(e=>setTimeout(e,100))}getTreeItem(e){return e}async getChildren(e){if(!a.workspace.workspaceFolders)return[];if(!e){if(this.isLoading)return[new u("Loading agent hooks...",a.TreeItemCollapsibleState.None,"loading","loading",void 0,this.context)];const e=await this.getClaudeCodeHooks();return 0===e.length?[new u("No Claude Code hooks configured",a.TreeItemCollapsibleState.None,"no-hooks","no-hooks",void 0,this.context)]:e.map(e=>new u(e.name,a.TreeItemCollapsibleState.Collapsed,"hook",`claude-hook-${e.name}`,void 0,this.context,e.enabled,e.config,e.configPath))}if("hook"===e.contextValue&&e.hookConfig){const t=e.hookConfig,n=[];return Array.isArray(t)&&t.forEach((t,i)=>{n.push(new u(`Trigger ${i+1}`,a.TreeItemCollapsibleState.Expanded,"hook-trigger",`trigger-${e.id}-${i}`,e.configPath?{command:"vscode.open",title:"Open Configuration File",arguments:[a.Uri.file(e.configPath)]}:void 0,this.context,void 0,t))}),n}if("hook-trigger"===e.contextValue&&e.hookConfig){const t=e.hookConfig,n=[];return void 0!==t.matcher&&n.push(new u(`Matcher: ${t.matcher||"(empty)"}`,a.TreeItemCollapsibleState.None,"hook-detail",`${e.id}-matcher`,e.command,this.context)),t.hooks&&Array.isArray(t.hooks)&&t.hooks.forEach((t,i)=>{"command"===t.type&&n.push(new u(`Command: ${t.command}`,a.TreeItemCollapsibleState.None,"hook-command",`${e.id}-command-${i}`,{command:"prisma.hooks.copyCommand",title:"Copy Command",arguments:[t.command]},this.context))}),n}return[]}async getClaudeCodeHooks(){const e=[];if(a.workspace.workspaceFolders){const t=c.join(a.workspace.workspaceFolders[0].uri.fsPath,".claude","settings.json");if(l.existsSync(t))try{const n=JSON.parse(l.readFileSync(t,"utf8"));n.hooks&&Object.entries(n.hooks).forEach(([n,i])=>{e.push({name:n,enabled:!0,config:i,configPath:t})})}catch(e){}}try{const t=c.join(process.env.HOME||"",".claude","settings.json");if(l.existsSync(t)){const n=JSON.parse(l.readFileSync(t,"utf8"));n.hooks&&Object.entries(n.hooks).forEach(([n,i])=>{e.find(e=>e.name===n)||e.push({name:n,enabled:!0,config:i,configPath:t})})}}catch(e){}return e}};class u extends a.TreeItem{label;collapsibleState;contextValue;id;command;context;enabled;hookConfig;configPath;constructor(e,t,n,i,r,s,o,c,l){super(e,t),this.label=e,this.collapsibleState=t,this.contextValue=n,this.id=i,this.command=r,this.context=s,this.enabled=o,this.hookConfig=c,this.configPath=l,"loading"===n?this.iconPath=new a.ThemeIcon("sync~spin"):"no-hooks"===n?this.iconPath=new a.ThemeIcon("info"):"hook"===n?this.iconPath=new a.ThemeIcon("activate-breakpoints"):"hook-trigger"===n?this.iconPath=new a.ThemeIcon("run"):"hook-detail"===n?e.startsWith("Matcher:")?this.iconPath=new a.ThemeIcon("filter"):e.startsWith("Command:")?this.iconPath=new a.ThemeIcon("terminal"):this.iconPath=new a.ThemeIcon("circle-outline"):this.iconPath="hook-command"===n?new a.ThemeIcon("terminal"):s?{light:a.Uri.file(s.asAbsolutePath("icons/zap.svg")),dark:a.Uri.file(s.asAbsolutePath("icons/zap.svg"))}:new a.ThemeIcon("activate-breakpoints"),"no-hooks"===n?this.tooltip="Configure hooks in Claude Code CLI":"hook-detail"===n&&e.startsWith("Command:")?this.tooltip=e.substring(9):this.tooltip=e}}},127:(e,t,n)=>{"use strict";var i=n(5388),r=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),s=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");e.exports=new i("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==r.exec(e)||null!==s.exec(e))},construct:function(e){var t,n,i,o,a,c,l,u,p=0,h=null;if(null===(t=r.exec(e))&&(t=s.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],i=+t[2]-1,o=+t[3],!t[4])return new Date(Date.UTC(n,i,o));if(a=+t[4],c=+t[5],l=+t[6],t[7]){for(p=t[7].slice(0,3);p.length<3;)p+="0";p=+p}return t[9]&&(h=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(h=-h)),u=new Date(Date.UTC(n,i,o,a,c,l,p)),h&&u.setTime(u.getTime()-h),u},instanceOf:Date,represent:function(e){return e.toISOString()}})},261:(e,t,n)=>{"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.__esModule=!0;var s=r(n(2871)),o=i(n(9613)),a=i(n(3769)),c=r(n(2849)),l=r(n(7624)),u=i(n(1148));function p(){var e=new s.HandlebarsEnvironment;return c.extend(e,s),e.SafeString=o.default,e.Exception=a.default,e.Utils=c,e.escapeExpression=c.escapeExpression,e.VM=l,e.template=function(t){return l.template(t,e)},e}var h=p();h.create=p,u.default(h),h.default=h,t.default=h,e.exports=t.default},409:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.content=t.frontmatter=void 0,t.frontmatter={id:"refine-steering",name:"Steering Refinement Prompt",version:"1.0.0",description:"Refines existing steering documents"},t.content="\n<system>\nYou are refining a steering document. The current content is provided below.\n\nRemember that this content will be injected into AI agent contexts with the wrapper:\n\"I am providing you some additional guidance that you should follow for your entire execution. These are intended to steer you in the right direction.\"\n\nReview and refine the content to:\n\n1. Ensure all instructions are clear and direct\n2. Make rules more specific to this project's patterns\n3. Add concrete examples from the actual codebase\n4. Remove any generic programming advice\n5. Organize rules in order of importance\n\nKeep the refined content focused on actionable guidance specific to this codebase.\n</system>\n\nPlease refine the steering document at {{filePath}}\n\nRefine this document to:\n\n1. Make instructions more specific to this project's patterns\n2. Add concrete examples from the actual codebase\n3. Remove any generic programming advice\n4. Organize rules in order of importance\n5. Keep the refined content focused on actionable guidance\n\nAfter refining, overwrite the original file with the improved content.\n",t.default={frontmatter:t.frontmatter,content:t.content}},566:(e,t,n)=>{"use strict";t.__esModule=!0;var i=n(2849),r={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=i.indexOf(r.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=r.lookupLevel(e),"undefined"!=typeof console&&r.lookupLevel(r.level)<=e){var t=r.methodMap[e];console[t]||(t="log");for(var n=arguments.length,i=Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];console[t].apply(console,i)}}};t.default=r,e.exports=t.default},639:(e,t,n)=>{"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=i(n(261)),s=i(n(2300)),o=n(9027),a=n(1127),c=i(n(6727)),l=i(n(1350)),u=i(n(1148)),p=r.default.create;function h(){var e=p();return e.compile=function(t,n){return a.compile(t,n,e)},e.precompile=function(t,n){return a.precompile(t,n,e)},e.AST=s.default,e.Compiler=a.Compiler,e.JavaScriptCompiler=c.default,e.Parser=o.parser,e.parse=o.parse,e.parseWithoutProcessing=o.parseWithoutProcessing,e}var d=h();d.create=h,u.default(d),d.Visitor=l.default,d.default=d,t.default=d,e.exports=t.default},857:e=>{"use strict";e.exports=require("os")},908:(e,t,n)=>{"use strict";t.__esModule=!0;var i,r=n(2849),s=(i=n(3769))&&i.__esModule?i:{default:i};t.default=function(e){e.registerHelper("with",function(e,t){if(2!=arguments.length)throw new s.default("#with requires exactly one argument");r.isFunction(e)&&(e=e.call(this));var n=t.fn;if(r.isEmpty(e))return t.inverse(this);var i=t.data;return t.data&&t.ids&&((i=r.createFrame(t.data)).contextPath=r.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:i,blockParams:r.blockParams([e],[i&&i.contextPath])})})},e.exports=t.default},915:(e,t,n)=>{"use strict";t.__esModule=!0;var i,r=(i=n(1350))&&i.__esModule?i:{default:i};function s(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=e}function o(e,t,n){void 0===t&&(t=e.length);var i=e[t-1],r=e[t-2];return i?"ContentStatement"===i.type?(r||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(i.original):void 0:n}function a(e,t,n){void 0===t&&(t=-1);var i=e[t+1],r=e[t+2];return i?"ContentStatement"===i.type?(r||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(i.original):void 0:n}function c(e,t,n){var i=e[null==t?0:t+1];if(i&&"ContentStatement"===i.type&&(n||!i.rightStripped)){var r=i.value;i.value=i.value.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),i.rightStripped=i.value!==r}}function l(e,t,n){var i=e[null==t?e.length-1:t-1];if(i&&"ContentStatement"===i.type&&(n||!i.leftStripped)){var r=i.value;return i.value=i.value.replace(n?/\s+$/:/[ \t]+$/,""),i.leftStripped=i.value!==r,i.leftStripped}}s.prototype=new r.default,s.prototype.Program=function(e){var t=!this.options.ignoreStandalone,n=!this.isRootSeen;this.isRootSeen=!0;for(var i=e.body,r=0,s=i.length;r<s;r++){var u=i[r],p=this.accept(u);if(p){var h=o(i,r,n),d=a(i,r,n),f=p.openStandalone&&h,m=p.closeStandalone&&d,g=p.inlineStandalone&&h&&d;p.close&&c(i,r,!0),p.open&&l(i,r,!0),t&&g&&(c(i,r),l(i,r)&&"PartialStatement"===u.type&&(u.indent=/([ \t]+$)/.exec(i[r-1].original)[1])),t&&f&&(c((u.program||u.inverse).body),l(i,r)),t&&m&&(c(i,r),l((u.inverse||u.program).body))}}return e},s.prototype.BlockStatement=s.prototype.DecoratorBlock=s.prototype.PartialBlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,n=e.program&&e.inverse,i=n,r=n;if(n&&n.chained)for(i=n.body[0].program;r.chained;)r=r.body[r.body.length-1].program;var s={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:a(t.body),closeStandalone:o((i||t).body)};if(e.openStrip.close&&c(t.body,null,!0),n){var u=e.inverseStrip;u.open&&l(t.body,null,!0),u.close&&c(i.body,null,!0),e.closeStrip.open&&l(r.body,null,!0),!this.options.ignoreStandalone&&o(t.body)&&a(i.body)&&(l(t.body),c(i.body))}else e.closeStrip.open&&l(t.body,null,!0);return s},s.prototype.Decorator=s.prototype.MustacheStatement=function(e){return e.strip},s.prototype.PartialStatement=s.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},t.default=s,e.exports=t.default},1127:(e,t,n)=>{"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.Compiler=c,t.precompile=function(e,t,n){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new r.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);"data"in(t=t||{})||(t.data=!0),t.compat&&(t.useDepths=!0);var i=n.parse(e,t),s=(new n.Compiler).compile(i,t);return(new n.JavaScriptCompiler).compile(s,t)},t.compile=function(e,t,n){if(void 0===t&&(t={}),null==e||"string"!=typeof e&&"Program"!==e.type)throw new r.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);"data"in(t=s.extend({},t))||(t.data=!0),t.compat&&(t.useDepths=!0);var i=void 0;function o(){var i=n.parse(e,t),r=(new n.Compiler).compile(i,t),s=(new n.JavaScriptCompiler).compile(r,t,void 0,!0);return n.template(s)}function a(e,t){return i||(i=o()),i.call(this,e,t)}return a._setup=function(e){return i||(i=o()),i._setup(e)},a._child=function(e,t,n,r){return i||(i=o()),i._child(e,t,n,r)},a};var r=i(n(3769)),s=n(2849),o=i(n(2300)),a=[].slice;function c(){}function l(e,t){if(e===t)return!0;if(s.isArray(e)&&s.isArray(t)&&e.length===t.length){for(var n=0;n<e.length;n++)if(!l(e[n],t[n]))return!1;return!0}}function u(e){if(!e.path.parts){var t=e.path;e.path={type:"PathExpression",data:!1,depth:0,parts:[t.original+""],original:t.original+"",loc:t.loc}}}c.prototype={compiler:c,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;n<t;n++){var i=this.opcodes[n],r=e.opcodes[n];if(i.opcode!==r.opcode||!l(i.args,r.args))return!1}for(t=this.children.length,n=0;n<t;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[],t.knownHelpers=s.extend(Object.create(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},t.knownHelpers),this.accept(e)},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++;return this.usePartial=this.usePartial||t.usePartial,this.children[n]=t,this.useDepths=this.useDepths||t.useDepths,n},accept:function(e){if(!this[e.type])throw new r.default("Unknown type: "+e.type,e);this.sourceNode.unshift(e);var t=this[e.type](e);return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,n=t.length,i=0;i<n;i++)this.accept(t[i]);return this.options.blockParams.shift(),this.isSimple=1===n,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){u(e);var t=e.program,n=e.inverse;t=t&&this.compileProgram(t),n=n&&this.compileProgram(n);var i=this.classifySexpr(e);"helper"===i?this.helperSexpr(e,t,n):"simple"===i?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,n),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(e){var t=e.program&&this.compileProgram(e.program),n=this.setupFullMustacheParams(e,t,void 0),i=e.path;this.useDecorators=!0,this.opcode("registerDecorator",n.length,i.original)},PartialStatement:function(e){this.usePartial=!0;var t=e.program;t&&(t=this.compileProgram(e.program));var n=e.params;if(n.length>1)throw new r.default("Unsupported number of partial arguments: "+n.length,e);n.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):n.push({type:"PathExpression",parts:[],depth:0}));var i=e.name.original,s="SubExpression"===e.name.type;s&&this.accept(e.name),this.setupFullMustacheParams(e,t,void 0,!0);var o=e.indent||"";this.options.preventIndent&&o&&(this.opcode("appendContent",o),o=""),this.opcode("invokePartial",s,i,o),this.opcode("append")},PartialBlockStatement:function(e){this.PartialStatement(e)},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(e){this.DecoratorBlock(e)},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){u(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,n){var i=e.path,r=i.parts[0],s=null!=t||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),i.strict=!0,this.accept(i),this.opcode("invokeAmbiguous",r,s)},simpleSexpr:function(e){var t=e.path;t.strict=!0,this.accept(t),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,n){var i=this.setupFullMustacheParams(e,t,n),s=e.path,a=s.parts[0];if(this.options.knownHelpers[a])this.opcode("invokeKnownHelper",i.length,a);else{if(this.options.knownHelpersOnly)throw new r.default("You specified knownHelpersOnly, but used the unknown helper "+a,e);s.strict=!0,s.falsy=!0,this.accept(s),this.opcode("invokeHelper",i.length,s.original,o.default.helpers.simpleId(s))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],n=o.default.helpers.scopedId(e),i=!e.depth&&!n&&this.blockParamIndex(t);i?this.opcode("lookupBlockParam",i,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts,e.strict)):this.opcode("lookupOnContext",e.parts,e.falsy,e.strict,n):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,n=0,i=t.length;for(this.opcode("pushHash");n<i;n++)this.pushParam(t[n].value);for(;n--;)this.opcode("assignToHash",t[n].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:a.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=o.default.helpers.simpleId(e.path),n=t&&!!this.blockParamIndex(e.path.parts[0]),i=!n&&o.default.helpers.helperExpression(e),r=!n&&(i||t);if(r&&!i){var s=e.path.parts[0],a=this.options;a.knownHelpers[s]?i=!0:a.knownHelpersOnly&&(r=!1)}return i?"helper":r?"ambiguous":"simple"},pushParams:function(e){for(var t=0,n=e.length;t<n;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e);else{if(this.trackIds){var n=void 0;if(!e.parts||o.default.helpers.scopedId(e)||e.depth||(n=this.blockParamIndex(e.parts[0])),n){var i=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",n,i)}else(t=e.original||t).replace&&(t=t.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,n,i){var r=e.params;return this.pushParams(r),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.accept(e.hash):this.opcode("emptyHash",i),r},blockParamIndex:function(e){for(var t=0,n=this.options.blockParams.length;t<n;t++){var i=this.options.blockParams[t],r=i&&s.indexOf(i,e);if(i&&r>=0)return[t,r]}}}},1148:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e){"object"!=typeof globalThis&&(Object.prototype.__defineGetter__("__magic__",function(){return this}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__);var t=globalThis.Handlebars;e.noConflict=function(){return globalThis.Handlebars===e&&(globalThis.Handlebars=t),e}},e.exports=t.default},1231:e=>{"use strict";function t(e,t){var n="",i=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+="\n\n"+e.mark.snippet),i+" "+n):i}function n(e,n){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=n,this.message=t(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n.prototype.toString=function(e){return this.name+": "+t(this,e)},e.exports=n},1283:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},i(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),o=0;o<n.length;o++)"default"!==n[o]&&r(t,e,n[o]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.PermissionCache=void 0;const a=o(n(1398));class c extends a.EventEmitter{configReader;outputChannel;cache;constructor(e,t){super(),this.configReader=e,this.outputChannel=t}async get(){return void 0!==this.cache?this.cache:this.refreshAndGet()}async refresh(){await this.refreshAndGet()}async refreshAndGet(){const e=this.cache;return this.cache=await this.configReader.getBypassPermissionStatus(),e!==this.cache&&(this.outputChannel.appendLine(`[PermissionCache] Permission changed: ${e} -> ${this.cache}`),!1===e&&!0===this.cache&&(this.outputChannel.appendLine("[PermissionCache] Permission granted! Firing event."),this.fire(!0)),!0===e&&!1===this.cache&&(this.outputChannel.appendLine("[PermissionCache] Permission revoked! Firing event."),this.fire(!1))),this.cache}}t.PermissionCache=c},1350:(e,t,n)=>{"use strict";t.__esModule=!0;var i,r=(i=n(3769))&&i.__esModule?i:{default:i};function s(){this.parents=[]}function o(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")}function a(e){o.call(this,e),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")}function c(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")}s.prototype={constructor:s,mutating:!1,acceptKey:function(e,t){var n=this.accept(e[t]);if(this.mutating){if(n&&!s.prototype[n.type])throw new r.default('Unexpected node type "'+n.type+'" found when accepting '+t+" on "+e.type);e[t]=n}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new r.default(e.type+" requires "+t)},acceptArray:function(e){for(var t=0,n=e.length;t<n;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,n--)},accept:function(e){if(e){if(!this[e.type])throw new r.default("Unknown type: "+e.type,e);this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:!1!==t?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:o,Decorator:o,BlockStatement:a,DecoratorBlock:a,PartialStatement:c,PartialBlockStatement:function(e){c.call(this,e),this.acceptKey(e,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:o,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},t.default=s,e.exports=t.default},1372:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},i(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),o=0;o<n.length;o++)"default"!==n[o]&&r(t,e,n[o]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.SteeringExplorerProvider=void 0;const a=o(n(1398)),c=o(n(6928)),l=o(n(9896));t.SteeringExplorerProvider=class{context;_onDidChangeTreeData=new a.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;steeringManager;isLoading=!1;constructor(e){this.context=e}setSteeringManager(e){this.steeringManager=e}refresh(){this.isLoading=!0,this._onDidChangeTreeData.fire(),setTimeout(()=>{this.isLoading=!1,this._onDidChangeTreeData.fire()},100)}getTreeItem(e){return e}async getChildren(e){if(!e){const e=[];if(this.isLoading)return e.push(new u("Loading steering documents...",a.TreeItemCollapsibleState.None,"steering-loading","",this.context)),e;const t=c.join(process.env.HOME||"",".claude","CLAUDE.md"),n=l.existsSync(t);let i="",r=!1;return a.workspace.workspaceFolders&&(i=c.join(a.workspace.workspaceFolders[0].uri.fsPath,"CLAUDE.md"),r=l.existsSync(i)),n&&e.push(new u("Global Rule",a.TreeItemCollapsibleState.None,"claude-md-global",t,this.context,{command:"vscode.open",title:"Open Global CLAUDE.md",arguments:[a.Uri.file(t)]})),r&&e.push(new u("Project Rule",a.TreeItemCollapsibleState.None,"claude-md-project",i,this.context,{command:"vscode.open",title:"Open Project CLAUDE.md",arguments:[a.Uri.file(i)]})),a.workspace.workspaceFolders&&this.steeringManager&&(await this.steeringManager.getSteeringDocuments()).length>0&&e.push(new u("Steering Docs",a.TreeItemCollapsibleState.Expanded,"steering-header","",this.context)),n||e.push(new u("Create Global Rule",a.TreeItemCollapsibleState.None,"create-global-claude","",this.context,{command:"prisma.steering.createUserRule",title:"Create Global CLAUDE.md"})),a.workspace.workspaceFolders&&!r&&e.push(new u("Create Project Rule",a.TreeItemCollapsibleState.None,"create-project-claude","",this.context,{command:"prisma.steering.createProjectRule",title:"Create Project CLAUDE.md"})),e}if("steering-header"===e.contextValue){const e=[];if(a.workspace.workspaceFolders&&this.steeringManager){const t=await this.steeringManager.getSteeringDocuments(),n=a.workspace.workspaceFolders[0].uri.fsPath;for(const i of t){const t=c.relative(n,i.path);e.push(new u(i.name,a.TreeItemCollapsibleState.None,"steering-document",i.path,this.context,{command:"vscode.open",title:"Open Steering Document",arguments:[a.Uri.file(i.path)]},t))}}return e}return[]}};class u extends a.TreeItem{label;collapsibleState;contextValue;resourcePath;context;command;filename;constructor(e,t,n,i,r,s,o){super(e,t),this.label=e,this.collapsibleState=t,this.contextValue=n,this.resourcePath=i,this.context=r,this.command=s,this.filename=o,"steering-loading"===n?(this.iconPath=new a.ThemeIcon("sync~spin"),this.tooltip="Loading steering documents..."):"claude-md-global"===n?(this.iconPath=new a.ThemeIcon("globe"),this.tooltip=`Global CLAUDE.md: ${i}`,this.description="~/.claude/CLAUDE.md"):"claude-md-project"===n?(this.iconPath=new a.ThemeIcon("root-folder"),this.tooltip=`Project CLAUDE.md: ${i}`,this.description="CLAUDE.md"):"create-global-claude"===n?(this.iconPath=new a.ThemeIcon("globe"),this.tooltip="Click to create Global CLAUDE.md"):"create-project-claude"===n?(this.iconPath=new a.ThemeIcon("root-folder"),this.tooltip="Click to create Project CLAUDE.md"):"separator"===n?(this.iconPath=void 0,this.description=void 0):"steering-header"===n?(this.iconPath=new a.ThemeIcon("folder-library"),this.description=void 0,this.tooltip="Generated project steering documents"):"steering-document"===n&&(this.iconPath="product"===e?new a.ThemeIcon("lightbulb-empty"):"tech"===e?new a.ThemeIcon("circuit-board"):"structure"===e?new a.ThemeIcon("list-tree"):new a.ThemeIcon("file"),this.tooltip=`Steering document: ${i}`,this.description=o)}}},1398:e=>{"use strict";e.exports=require("vscode")},1461:(e,t,n)=>{"use strict";var i=n(8433),r=n(5388),s=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),o=/^[-+]?[0-9]+e/;e.exports=new r("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!s.test(e)||"_"===e[e.length-1])},construct:function(e){var t,n;return n="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:n*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||i.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(i.isNegativeZero(e))return"-0.0";return n=e.toString(10),o.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"})},1610:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.content=t.frontmatter=void 0,t.frontmatter={id:"impl-task",name:"Implement Task",version:"1.0.0",description:"Implement a task after a spec workflow",variables:{taskFilePath:{type:"string",required:!0,description:"Path for task file"},taskDescription:{type:"string",required:!0,description:"Description for task"}}},t.content="<user_input>\nI just completed a spec workflow and now need to implement one of the specific tasks.\n\nTask File Path: {{taskFilePath}}\nTask Description: {{taskDescription}}\n\nPlease help me:\n\n1. First use the *spec-system-prompt-loader* sub agent to load the spec workflow system prompts and understand the complete context\n2. Review the requirements and design documents in the spec folder\n3. Implement this task based on existing codebase patterns and conventions\n4. Ensure code quality, including error handling, performance, and security\n5. Add comprehensive unit tests for the implemented code\n\nLet's start implementing this task!\n</user_input>\n",t.default={frontmatter:t.frontmatter,content:t.content}},1769:(e,t,n)=>{"use strict";e.exports=n(6184)},1851:(e,t,n)=>{"use strict";var i=n(5388);e.exports=new i("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}})},1882:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.content=t.frontmatter=void 0,t.frontmatter={id:"create-spec-with-agents",name:"Create Spec with Subagents",version:"1.0.0",description:"Create a spec using specialized subagents for parallel processing",variables:{description:{type:"string",required:!0,description:"User's feature description"},workspacePath:{type:"string",required:!0,description:"Workspace root path"},specBasePath:{type:"string",required:!0,description:"Base path for specs directory"}}},t.content="<user_input>\nLAUNCH A SPEC DEVELOPMENT WORKFLOW\n\nCreate a requirements document for a new feature\n\nFeature Description: {{description}}\n\nWorkspace path: {{workspacePath}}\nSpec base path: {{specBasePath}}\n\nYou have full control over the naming and file creation.\n</user_input>\n",t.default={frontmatter:t.frontmatter,content:t.content}},2119:(e,t,n)=>{"use strict";var i=n(1231),r=n(5388);function s(e,t){var n=[];return e[t].forEach(function(e){var t=n.length;n.forEach(function(n,i){n.tag===e.tag&&n.kind===e.kind&&n.multi===e.multi&&(t=i)}),n[t]=e}),n}function o(e){return this.extend(e)}o.prototype.extend=function(e){var t=[],n=[];if(e instanceof r)n.push(e);else if(Array.isArray(e))n=n.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new i("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit))}t.forEach(function(e){if(!(e instanceof r))throw new i("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&"scalar"!==e.loadKind)throw new i("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new i("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(e){if(!(e instanceof r))throw new i("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var a=Object.create(o.prototype);return a.implicit=(this.implicit||[]).concat(t),a.explicit=(this.explicit||[]).concat(n),a.compiledImplicit=s(a,"implicit"),a.compiledExplicit=s(a,"explicit"),a.compiledTypeMap=function(){var e,t,n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function i(e){e.multi?(n.multi[e.kind].push(e),n.multi.fallback.push(e)):n[e.kind][e.tag]=n.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(i);return n}(a.compiledImplicit,a.compiledExplicit),a},e.exports=o},2277:(e,t,n)=>{"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.registerDefaultHelpers=function(e){r.default(e),s.default(e),o.default(e),a.default(e),c.default(e),l.default(e),u.default(e)},t.moveHelperToHooks=function(e,t,n){e.helpers[t]&&(e.hooks[t]=e.helpers[t],n||delete e.helpers[t])};var r=i(n(6097)),s=i(n(6785)),o=i(n(4353)),a=i(n(2355)),c=i(n(5300)),l=i(n(7466)),u=i(n(908))},2300:(e,t)=>{"use strict";t.__esModule=!0;var n={helpers:{helperExpression:function(e){return"SubExpression"===e.type||("MustacheStatement"===e.type||"BlockStatement"===e.type)&&!!(e.params&&e.params.length||e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!n.helpers.scopedId(e)&&!e.depth}}};t.default=n,e.exports=t.default},2355:(e,t,n)=>{"use strict";t.__esModule=!0;var i,r=n(2849),s=(i=n(3769))&&i.__esModule?i:{default:i};t.default=function(e){e.registerHelper("if",function(e,t){if(2!=arguments.length)throw new s.default("#if requires exactly one argument");return r.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||r.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){if(2!=arguments.length)throw new s.default("#unless requires exactly one argument");return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},e.exports=t.default},2369:(e,t,n)=>{"use strict";var i=n(5388);e.exports=new i("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}})},2614:(e,t)=>{"use strict";t.__esModule=!0,t.wrapHelper=function(e,t){return"function"!=typeof e?e:function(){return arguments[arguments.length-1]=t(arguments[arguments.length-1]),e.apply(this,arguments)}}},2713:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTranslations=o,t.t=function(){return o()};const i=n(9010),r={views:{specs:"Especificações",agents:"Agentes",steering:"Direcionamento",mcpServers:"Servidores MCP",hooks:"Hooks",settings:"Configurações"},agents:{userAgents:"Agentes do Usuário",userAgentsTooltip:"Agentes globais disponíveis para todos os projetos",projectAgents:"Agentes do Projeto",projectAgentsTooltip:"Agentes específicos deste projeto",loadingAgents:"Carregando agentes..."},commands:{createSpec:"Criar Nova Especificação",deleteSpec:"Deletar Especificação",openSpec:"Abrir Especificação",createSteering:"Criar Novo Direcionamento",deleteSteering:"Deletar Direcionamento",openSteering:"Abrir Direcionamento",refreshSpecs:"Atualizar Especificações",refreshSteering:"Atualizar Direcionamento",refreshAgents:"Atualizar Agentes",refreshMcpServers:"Atualizar Servidores MCP",refreshHooks:"Atualizar Hooks",openSettings:"Abrir Configurações",checkUpdates:"Verificar Atualizações"},notifications:{specCreated:"Especificação criada com sucesso",specDeleted:"Especificação deletada com sucesso",steeringCreated:"Direcionamento criado com sucesso",steeringDeleted:"Direcionamento deletado com sucesso",updateAvailable:"Atualização disponível",noUpdateAvailable:"Nenhuma atualização disponível",error:"Erro",success:"Sucesso"},messages:{welcomeTitle:"Bem-vindo ao Prisma",welcomeMessage:"Gerencie suas especificações, agentes e configurações do Claude",noWorkspace:"Nenhum workspace aberto",loadingSpecs:"Carregando especificações...",noSpecsFound:"Nenhuma especificação encontrada",confirmDelete:"Tem certeza que deseja deletar?",yes:"Sim",no:"Não"},config:{specsPath:"Caminho para as especificações",steeringPath:"Caminho para o direcionamento",agentsPath:"Caminho para os agentes",mcpServersPath:"Caminho para os servidores MCP",hooksPath:"Caminho para os hooks",settingsPath:"Caminho para as configurações",autoRefresh:"Atualizar automaticamente",checkUpdatesOnStartup:"Verificar atualizações ao iniciar"}},s={views:{specs:"Specifications",agents:"Agents",steering:"Steering",mcpServers:"MCP Servers",hooks:"Hooks",settings:"Settings"},agents:{userAgents:"User Agents",userAgentsTooltip:"Global agents available for all projects",projectAgents:"Project Agents",projectAgentsTooltip:"Agents specific to this project",loadingAgents:"Loading agents..."},commands:{createSpec:"Create New Specification",deleteSpec:"Delete Specification",openSpec:"Open Specification",createSteering:"Create New Steering",deleteSteering:"Delete Steering",openSteering:"Open Steering",refreshSpecs:"Refresh Specifications",refreshSteering:"Refresh Steering",refreshAgents:"Refresh Agents",refreshMcpServers:"Refresh MCP Servers",refreshHooks:"Refresh Hooks",openSettings:"Open Settings",checkUpdates:"Check for Updates"},notifications:{specCreated:"Specification created successfully",specDeleted:"Specification deleted successfully",steeringCreated:"Steering created successfully",steeringDeleted:"Steering deleted successfully",updateAvailable:"Update available",noUpdateAvailable:"No updates available",error:"Error",success:"Success"},messages:{welcomeTitle:"Welcome to Prisma",welcomeMessage:"Manage your Claude specifications, agents, and settings",noWorkspace:"No workspace open",loadingSpecs:"Loading specifications...",noSpecsFound:"No specifications found",confirmDelete:"Are you sure you want to delete?",yes:"Yes",no:"No"},config:{specsPath:"Path to specifications",steeringPath:"Path to steering",agentsPath:"Path to agents",mcpServersPath:"Path to MCP servers",hooksPath:"Path to hooks",settingsPath:"Path to settings",autoRefresh:"Auto refresh",checkUpdatesOnStartup:"Check for updates on startup"}};function o(){return"pt"===(0,i.getVSCodeLanguage)()?r:s}},2849:(e,t)=>{"use strict";t.__esModule=!0,t.extend=o,t.indexOf=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return r.test(e)?e.replace(i,s):e},t.isEmpty=function(e){return!e&&0!==e||!(!l(e)||0!==e.length)},t.createFrame=function(e){var t=o({},e);return t._parent=e,t},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},i=/[&<>"'`=]/g,r=/[&<>"'`=]/;function s(e){return n[e]}function o(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}var a=Object.prototype.toString;t.toString=a;var c=function(e){return"function"==typeof e};c(/x/)&&(t.isFunction=c=function(e){return"function"==typeof e&&"[object Function]"===a.call(e)}),t.isFunction=c;var l=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===a.call(e)};t.isArray=l},2871:(e,t,n)=>{"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.HandlebarsEnvironment=p;var r=n(2849),s=i(n(3769)),o=n(2277),a=n(5940),c=i(n(566)),l=n(3865);t.VERSION="4.7.8",t.COMPILER_REVISION=8,t.LAST_COMPATIBLE_COMPILER_REVISION=7,t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var u="[object Object]";function p(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},o.registerDefaultHelpers(this),a.registerDefaultDecorators(this)}p.prototype={constructor:p,logger:c.default,log:c.default.log,registerHelper:function(e,t){if(r.toString.call(e)===u){if(t)throw new s.default("Arg not supported with multiple helpers");r.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(r.toString.call(e)===u)r.extend(this.partials,e);else{if(void 0===t)throw new s.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(r.toString.call(e)===u){if(t)throw new s.default("Arg not supported with multiple decorators");r.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){l.resetLoggedProperties()}};var h=c.default.log;t.log=h,t.createFrame=r.createFrame,t.logger=c.default},3111:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},i(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),o=0;o<n.length;o++)"default"!==n[o]&&r(t,e,n[o]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigReader=void 0;const a=o(n(9896)),c=o(n(6928)),l=o(n(857));t.ConfigReader=class{outputChannel;configPath;watchCallback;constructor(e){this.outputChannel=e,this.configPath=c.join(l.homedir(),".claude.json")}async getBypassPermissionStatus(){try{if(!a.existsSync(this.configPath))return this.outputChannel.appendLine(`[ConfigReader] Config file not found: ${this.configPath}`),!1;const e=await a.promises.readFile(this.configPath,"utf8");return!0===JSON.parse(e).bypassPermissionsModeAccepted}catch(e){return this.outputChannel.appendLine(`[ConfigReader] Error reading config: ${e}`),!1}}async setBypassPermission(e){try{let t={};if(a.existsSync(this.configPath)){const e=await a.promises.readFile(this.configPath,"utf8");let n=!1;try{t=JSON.parse(e),n=!0}catch(i){this.outputChannel.appendLine("[ConfigReader] Failed to parse existing config, retrying...");for(let i=0;i<2;i++)try{t=JSON.parse(e),n=!0;break}catch(e){this.outputChannel.appendLine(`[ConfigReader] Retry ${i+1} failed to parse config`)}}n||(this.outputChannel.appendLine("[ConfigReader] All parse attempts failed, using empty config object"),t={})}t.bypassPermissionsModeAccepted=e;const n=c.dirname(this.configPath);a.existsSync(n)||await a.promises.mkdir(n,{recursive:!0}),await a.promises.writeFile(this.configPath,JSON.stringify(t,null,2),"utf8"),this.outputChannel.appendLine(`[ConfigReader] Set bypassPermissionsModeAccepted to ${e}`)}catch(e){throw this.outputChannel.appendLine(`[ConfigReader] Failed to set permission: ${e}`),e}}watchConfigFile(e){this.watchCallback=e,a.watchFile(this.configPath,{interval:2e3},(t,n)=>{t.mtime.getTime()!==n.mtime.getTime()&&e()}),this.outputChannel.appendLine(`[ConfigReader] Started watching config file: ${this.configPath}`)}dispose(){this.watchCallback&&(a.unwatchFile(this.configPath),this.outputChannel.appendLine("[ConfigReader] Stopped watching config file"))}}},3769:(e,t)=>{"use strict";t.__esModule=!0;var n=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function i(e,t){var r=t&&t.loc,s=void 0,o=void 0,a=void 0,c=void 0;r&&(s=r.start.line,o=r.end.line,a=r.start.column,c=r.end.column,e+=" - "+s+":"+a);for(var l=Error.prototype.constructor.call(this,e),u=0;u<n.length;u++)this[n[u]]=l[n[u]];Error.captureStackTrace&&Error.captureStackTrace(this,i);try{r&&(this.lineNumber=s,this.endLineNumber=o,Object.defineProperty?(Object.defineProperty(this,"column",{value:a,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:c,enumerable:!0})):(this.column=a,this.endColumn=c))}catch(e){}}i.prototype=new Error,t.default=i,e.exports=t.default},3865:(e,t,n)=>{"use strict";t.__esModule=!0,t.createProtoAccessControl=function(e){var t=Object.create(null);t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1;var n=Object.create(null);return n.__proto__=!1,{properties:{whitelist:r.createNewLookupObject(n,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:r.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}},t.resultIsAllowed=function(e,t,n){return function(e,t){return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(function(e){!0!==o[e]&&(o[e]=!0,s.default.log("error",'Handlebars: Access has been denied to resolve the property "'+e+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(t),!1)}("function"==typeof e?t.methods:t.properties,n)},t.resetLoggedProperties=function(){Object.keys(o).forEach(function(e){delete o[e]})};var i,r=n(9726),s=(i=n(566))&&i.__esModule?i:{default:i},o=Object.create(null)},4265:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},i(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),o=0;o<n.length;o++)"default"!==n[o]&&r(t,e,n[o]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.outputChannel=void 0,t.getPermissionManager=function(){return O},t.activate=async function(e){t.outputChannel=a.window.createOutputChannel("Prisma for Claude Code - Debug");try{b.PromptLoader.getInstance().initialize(),t.outputChannel.appendLine("PromptLoader initialized successfully")}catch(e){t.outputChannel.appendLine(`Failed to initialize PromptLoader: ${e}`),a.window.showErrorMessage(`Failed to initialize prompt system: ${e}`)}const i=a.workspace.workspaceFolders;i&&0!==i.length||t.outputChannel.appendLine("WARNING: No workspace folder found!"),_=new c.ClaudeCodeProvider(e,t.outputChannel),O=new C.PermissionManager(e,t.outputChannel),await O.initializePermissions(),x=new l.SpecManager(_,t.outputChannel),T=new u.SteeringManager(_,t.outputChannel),A=new v.AgentManager(e,t.outputChannel),await A.initializeBuiltInAgents();const r=new m.OverviewProvider(e),s=new p.SpecExplorerProvider(e,t.outputChannel),o=new h.SteeringExplorerProvider(e),M=new d.HooksExplorerProvider(e),L=new f.MCPExplorerProvider(e,t.outputChannel),I=new g.AgentsExplorerProvider(e,A,t.outputChannel);s.setSpecManager(x),o.setSteeringManager(T),e.subscriptions.push(a.window.registerTreeDataProvider("prisma.views.overview",r),a.window.registerTreeDataProvider("prisma.views.specExplorer",s),a.window.registerTreeDataProvider("prisma.views.agentsExplorer",I),a.window.registerTreeDataProvider("prisma.views.steeringExplorer",o),a.window.registerTreeDataProvider("prisma.views.hooksStatus",M),a.window.registerTreeDataProvider("prisma.views.mcpServerStatus",L));const D=new k.UpdateChecker(e,t.outputChannel);(function(e,i,r,s,o,c,l){e.subscriptions.push(a.commands.registerCommand("prisma.permission.reset",async()=>{"Yes"===await a.window.showWarningMessage("Are you sure you want to reset Claude Code permissions? This will revoke the granted permissions.","Yes","No")&&(await O.resetPermission()?P.NotificationUtils.showAutoDismissNotification("Permissions have been reset"):a.window.showErrorMessage("Failed to reset permissions. Please check the output log."))}));const u=a.commands.registerCommand("prisma.spec.create",async()=>{t.outputChannel.appendLine("\n=== COMMAND prisma.spec.create TRIGGERED ==="),t.outputChannel.appendLine(`Time: ${(new Date).toLocaleTimeString()}`);try{await x.create()}catch(e){t.outputChannel.appendLine(`Error in createNewSpec: ${e}`),a.window.showErrorMessage(`Failed to create spec: ${e}`)}}),p=a.commands.registerCommand("prisma.spec.createWithAgents",async()=>{try{await x.createWithAgents()}catch(e){t.outputChannel.appendLine(`Error in createWithAgents: ${e}`),a.window.showErrorMessage(`Failed to create spec with agents: ${e}`)}});e.subscriptions.push(u,p),e.subscriptions.push(a.commands.registerCommand("prisma.spec.navigate.requirements",async e=>{await x.navigateToDocument(e,"requirements")}),a.commands.registerCommand("prisma.spec.navigate.design",async e=>{await x.navigateToDocument(e,"design")}),a.commands.registerCommand("prisma.spec.navigate.tasks",async e=>{await x.navigateToDocument(e,"tasks")}),a.commands.registerCommand("prisma.spec.implTask",async(e,n,i)=>{t.outputChannel.appendLine(`[Task Execute] Line ${n+1}: ${i}`);const r=await a.workspace.openTextDocument(e),s=new a.WorkspaceEdit,o=r.lineAt(n),c=o.text.replace("- [ ]","- [x]"),l=new a.Range(n,0,n,o.text.length);s.replace(e,l,c),await a.workspace.applyEdit(s),await x.implTask(e.fsPath,i)}),a.commands.registerCommand("prisma.spec.refresh",async()=>{t.outputChannel.appendLine("[Manual Refresh] Refreshing spec explorer..."),i.refresh()})),e.subscriptions.push(a.commands.registerCommand("prisma.steering.create",async()=>{await T.createCustom()}),a.commands.registerCommand("prisma.steering.generateInitial",async()=>{await T.init()}),a.commands.registerCommand("prisma.steering.refine",async e=>{const t=a.Uri.file(e.resourcePath);await T.refine(t)}),a.commands.registerCommand("prisma.steering.delete",async e=>{t.outputChannel.appendLine(`[Steering] Deleting: ${e.label}`);const n=await T.delete(e.label,e.resourcePath);!n.success&&n.error&&a.window.showErrorMessage(n.error)}),a.commands.registerCommand("prisma.steering.createUserRule",async()=>{await T.createUserClaudeMd()}),a.commands.registerCommand("prisma.steering.createProjectRule",async()=>{await T.createProjectClaudeMd()}),a.commands.registerCommand("prisma.steering.refresh",async()=>{t.outputChannel.appendLine("[Manual Refresh] Refreshing steering explorer..."),r.refresh()}),a.commands.registerCommand("prisma.agents.refresh",async()=>{t.outputChannel.appendLine("[Manual Refresh] Refreshing agents explorer..."),c.refresh()})),e.subscriptions.push(a.workspace.onWillSaveTextDocument(async e=>{const t=e.document.fileName;t.includes(".claude/agents/")&&t.endsWith(".md")&&"Save"!==await a.window.showWarningMessage("Are you sure you want to save changes to this agent file?",{modal:!0},"Save","Cancel")&&e.waitUntil(new Promise(()=>{}))})),e.subscriptions.push(a.commands.registerCommand("prisma.spec.delete",async e=>{await x.delete(e.label)})),e.subscriptions.push(a.commands.registerCommand("prisma.hooks.refresh",()=>{s.refresh()}),a.commands.registerCommand("prisma.hooks.copyCommand",async e=>{await a.env.clipboard.writeText(e)})),e.subscriptions.push(a.commands.registerCommand("prisma.mcp.refresh",()=>{o.refresh()}),a.commands.registerCommand("prisma.checkForUpdates",async()=>{t.outputChannel.appendLine("Manual update check requested"),await l.checkForUpdates(!0)}),a.commands.registerCommand("prisma.settings.open",async()=>{t.outputChannel.appendLine("Opening Prisma settings...");const e=a.workspace.workspaceFolders?.[0];if(!e)return void a.window.showErrorMessage("No workspace folder found");const n=a.Uri.joinPath(e.uri,".claude"),i=a.Uri.joinPath(n,"settings");try{await a.workspace.fs.createDirectory(n),await a.workspace.fs.createDirectory(i)}catch(e){}const r=a.Uri.joinPath(i,y.CONFIG_FILE_NAME);try{await a.workspace.fs.stat(r)}catch(e){const t=w.ConfigManager.getInstance().getSettings();await a.workspace.fs.writeFile(r,Buffer.from(JSON.stringify(t,null,2)))}const s=await a.workspace.openTextDocument(r);await a.window.showTextDocument(s)}),a.commands.registerCommand("prisma.help.open",async()=>{t.outputChannel.appendLine("Opening Prisma help...");a.env.openExternal(a.Uri.parse("https://github.com/matheusmaiberg/prisma#readme"))}),a.commands.registerCommand("prisma.menu.open",async()=>{t.outputChannel.appendLine("Opening Prisma menu..."),await async function(){const e=a.workspace.getConfiguration(y.VSC_CONFIG_NAMESPACE),t={specs:e.get("views.specs.visible",!0),hooks:e.get("views.hooks.visible",!0),steering:e.get("views.steering.visible",!0),mcp:e.get("views.mcp.visible",!0)},n=[{label:`$(${t.specs?"check":"blank"}) Specs`,picked:t.specs,id:"specs"},{label:`$(${t.hooks?"check":"blank"}) Agent Hooks`,picked:t.hooks,id:"hooks"},{label:`$(${t.steering?"check":"blank"}) Agent Steering`,picked:t.steering,id:"steering"},{label:`$(${t.mcp?"check":"blank"}) MCP Servers`,picked:t.mcp,id:"mcp"}],i=await a.window.showQuickPick(n,{canPickMany:!0,placeHolder:"Select views to show"});if(i){const t={specs:i.some(e=>"specs"===e.id),hooks:i.some(e=>"hooks"===e.id),steering:i.some(e=>"steering"===e.id),mcp:i.some(e=>"mcp"===e.id)};await e.update("views.specs.visible",t.specs,a.ConfigurationTarget.Workspace),await e.update("views.hooks.visible",t.hooks,a.ConfigurationTarget.Workspace),await e.update("views.steering.visible",t.steering,a.ConfigurationTarget.Workspace),await e.update("views.mcp.visible",t.mcp,a.ConfigurationTarget.Workspace),a.window.showInformationMessage("View visibility updated!")}}()}),a.commands.registerCommand("prisma.permission.check",async()=>{const e=await O.checkPermission(),i=n(857).homedir()+"/.claude.json";a.window.showInformationMessage("Claude Code Permission Status: "+(e?"✅ Granted":"❌ Not Granted")),t.outputChannel.appendLine(`[Permission Check] Status: ${e}`),t.outputChannel.appendLine(`[Permission Check] Config file: ${i}`),t.outputChannel.appendLine("[Permission Check] Checking bypassPermissionsModeAccepted field in ~/.claude.json")}))})(e,s,o,M,L,I,D),await async function(){const e=a.workspace.workspaceFolders?.[0];if(!e)return;const t=a.Uri.joinPath(e.uri,".claude"),n=a.Uri.joinPath(t,"settings");try{await a.workspace.fs.createDirectory(t),await a.workspace.fs.createDirectory(n)}catch(e){}const i=a.Uri.joinPath(n,y.CONFIG_FILE_NAME);try{await a.workspace.fs.stat(i)}catch(e){const t=w.ConfigManager.getInstance().getSettings();await a.workspace.fs.writeFile(i,Buffer.from(JSON.stringify(t,null,2)))}}(),function(e,n,i,r,s,o){const c=a.workspace.createFileSystemWatcher("**/.claude/**/*");let l;const u=(e,a)=>{t.outputChannel.appendLine(`[FileWatcher] ${e}: ${a.fsPath}`),l&&clearTimeout(l),l=setTimeout(()=>{n.refresh(),i.refresh(),r.refresh(),s.refresh(),o.refresh()},1e3)};c.onDidCreate(e=>u("Create",e)),c.onDidDelete(e=>u("Delete",e)),c.onDidChange(e=>u("Change",e)),e.subscriptions.push(c);const p=a.workspace.createFileSystemWatcher(new a.RelativePattern(process.env.HOME||"",".claude/settings.json"));p.onDidChange(()=>{r.refresh(),s.refresh()}),e.subscriptions.push(p);const h=a.workspace.createFileSystemWatcher(new a.RelativePattern(process.env.HOME||"",".claude/CLAUDE.md")),d=a.workspace.createFileSystemWatcher("**/CLAUDE.md");h.onDidCreate(()=>i.refresh()),h.onDidDelete(()=>i.refresh()),d.onDidCreate(()=>i.refresh()),d.onDidDelete(()=>i.refresh()),e.subscriptions.push(h,d)}(e,s,o,M,L,I),D.checkForUpdates(),t.outputChannel.appendLine("Update check initiated");const E=new S.SpecTaskCodeLensProvider,j=w.ConfigManager.getInstance();let N=".claude/especificacoes";try{await j.loadSettings(),N=j.getPath("specs")||N}catch(e){t.outputChannel.appendLine(`Failed to load settings for spec CodeLens: ${e}`)}const U=[{language:"markdown",pattern:`**/${N.replace(/\\/g,"/")}/*/tasks.md`,scheme:"file"}],F=a.languages.registerCodeLensProvider(U,E);e.subscriptions.push(F),t.outputChannel.appendLine("CodeLens provider for spec tasks registered")},t.deactivate=function(){O&&O.dispose()};const a=o(n(1398)),c=n(7591),l=n(9658),u=n(8394),p=n(8328),h=n(1372),d=n(123),f=n(4315),m=n(6563),g=n(7825),v=n(5097),w=n(6807),y=n(6921),b=n(8916),k=n(8338),C=n(8998),P=n(7402),S=n(7775);let _,x,T,O,A},4315:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},i(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),o=0;o<n.length;o++)"default"!==n[o]&&r(t,e,n[o]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.MCPExplorerProvider=void 0;const a=o(n(1398)),c=n(5317),l=(0,n(9023).promisify)(c.exec);t.MCPExplorerProvider=class{context;_onDidChangeTreeData=new a.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;servers=new Map;outputChannel;isLoading=!0;constructor(e,t){this.context=e,this.outputChannel=t,this.loadMCPServers()}refresh(){this.isLoading=!0,this._onDidChangeTreeData.fire(),this.loadMCPServers()}getTreeItem(e){return e}async getChildren(e){if(!e){const e=[];if(this.isLoading)return e.push(new u("Loading MCP servers...",a.TreeItemCollapsibleState.None,"mcp-loading","loading",void 0,this.context)),e;for(const[t,n]of this.servers)e.push(new u(t,a.TreeItemCollapsibleState.Collapsed,"mcp-server",`mcp-${t}`,n,this.context));return 0===e.length&&e.push(new u("No MCP servers configured",a.TreeItemCollapsibleState.None,"mcp-empty","empty",void 0,this.context)),e}if("mcp-server"===e.contextValue&&e.serverInfo){const t=e.serverInfo,n=[];if(t.isLoadingDetails)return n.push(new u("Loading server details...",a.TreeItemCollapsibleState.None,"mcp-loading",`${e.id}-loading`,void 0,this.context)),n;const i=new u(`Scope: ${t.scope}`,a.TreeItemCollapsibleState.None,"mcp-detail",`${e.id}-scope`,void 0,this.context);if(t.scopeDisplay){const e=t.scopeDisplay.match(/Scope:\s*\w+\s*\(([^)]+)\)/);e&&(i.tooltip=e[1])}if(n.push(i),n.push(new u(`Type: ${t.type}`,a.TreeItemCollapsibleState.None,"mcp-detail",`${e.id}-type`,void 0,this.context)),"stdio"===t.type){let i=t.command||"";t.args&&t.args.length>0&&(i+=" "+t.args.join(" ")),i&&n.push(new u(`Command: ${i}`,a.TreeItemCollapsibleState.None,"mcp-detail",`${e.id}-command`,void 0,this.context))}else"sse"!==t.type&&"http"!==t.type||(t.url&&n.push(new u(`URL: ${t.url}`,a.TreeItemCollapsibleState.None,"mcp-detail",`${e.id}-url`,void 0,this.context)),t.headers&&Object.keys(t.headers).length>0&&n.push(new u(`Headers: ${Object.keys(t.headers).join(", ")}`,a.TreeItemCollapsibleState.None,"mcp-detail",`${e.id}-headers`,void 0,this.context)));if(t.env&&Object.keys(t.env).length>0){const i=Object.entries(t.env).map(([e,t])=>`${e}=${t}`).join(", ");n.push(new u(`Environment: ${i}`,a.TreeItemCollapsibleState.None,"mcp-detail",`${e.id}-env`,void 0,this.context))}return n}return[]}async loadMCPServers(){this.servers.clear();try{const e=a.workspace.workspaceFolders?.[0],t=e?e.uri.fsPath:void 0,{stdout:n,stderr:i}=await l("claude mcp list",{cwd:t});if(i&&(this.outputChannel.appendLine(`claude mcp list stderr: ${i}`),!n))return;await this.parseMCPListOutput(n),this.isLoading=!1,this._onDidChangeTreeData.fire(),this.loadAllServerDetailsAsync()}catch(e){this.outputChannel.appendLine(`Failed to load MCP servers: ${e}`),this.servers.clear()}}async parseMCPListOutput(e){const t=e.split("\n").filter(e=>e.trim());for(const e of t){const t=e.indexOf(":");if(t>0){const n=e.substring(0,t).trim();let i="disconnected";e.includes("✓ Connected")?i="connected":e.includes("✗ Failed to connect")&&(i="disconnected"),this.servers.set(n,{name:n,type:"stdio",scope:"local",status:i,isLoadingDetails:!0})}}}async loadAllServerDetailsAsync(){const e=Array.from(this.servers.keys()).map(async e=>{await this.loadServerDetails(e),this._onDidChangeTreeData.fire()});Promise.all(e).catch(e=>{this.outputChannel.appendLine(`Error loading server details: ${e}`)})}async loadServerDetails(e){try{const t=a.workspace.workspaceFolders?.[0],n=t?t.uri.fsPath:void 0,{stdout:i,stderr:r}=await l(`claude mcp get ${e}`,{cwd:n});r&&this.outputChannel.appendLine(`Error getting details for ${e}: ${r}`);const s=this.servers.get(e);s&&(this.parseServerDetails(s,i),s.isLoadingDetails=!1)}catch(t){this.outputChannel.appendLine(`Failed to get details for ${e}: ${t}`);const n=this.servers.get(e);n&&(n.isLoadingDetails=!1)}}parseServerDetails(e,t){const n=t.split("\n");for(const t of n){const n=t.trim();if(n.startsWith("Scope:")){e.scopeDisplay=n;const t=n.match(/Scope:\s*(\w+)/);if(t){const n=t[1].toLowerCase();"user"!==n&&"project"!==n&&"local"!==n||(e.scope=n)}}else if(n.startsWith("Type:")){const t=n.substring(5).trim().toLowerCase();"stdio"!==t&&"sse"!==t&&"http"!==t||(e.type=t)}else if(n.startsWith("Command:"))e.command=n.substring(8).trim();else if(n.startsWith("Args:")){const t=n.substring(5).trim();(t&&!t.startsWith("-")||t)&&(e.args=t.split(/\s+/))}else if(n.startsWith("URL:"))e.url=n.substring(4).trim();else if(n.startsWith("Headers:")){const t=n.substring(8).trim();if(t){e.headers={};const n=t.split(",");for(const t of n){const[n,i]=t.split(":").map(e=>e.trim());n&&(e.headers[n]=i||"")}}}else if(n.startsWith("Environment:")||n.startsWith("Env:")){const t=n.substring(n.indexOf(":")+1).trim();if(t&&"(none)"!==t&&"None"!==t){e.env={};const n=t.split(/\s+/);for(const t of n){const[n,i]=t.split("=");n&&(e.env[n]=i||"")}}}else if(n.startsWith("To remove this server")){const t=n.match(/claude mcp remove "(.+?)" -s (.+)$/);t&&(e.removeCommand=`claude mcp remove "${t[1]}" -s ${t[2]}`)}}}};class u extends a.TreeItem{label;collapsibleState;contextValue;id;serverInfo;context;constructor(e,t,n,i,r,s){if(super(e,t),this.label=e,this.collapsibleState=t,this.contextValue=n,this.id=i,this.serverInfo=r,this.context=s,"mcp-empty"===n?this.iconPath=new a.ThemeIcon("info"):"mcp-loading"===n?this.iconPath=new a.ThemeIcon("sync~spin"):"mcp-server"===n?this.iconPath="disconnected"===r?.status?new a.ThemeIcon("debug-disconnect"):new a.ThemeIcon("server-environment"):"mcp-detail"===n?e.startsWith("Type:")?this.iconPath=new a.ThemeIcon("symbol-property"):e.startsWith("Command:")?this.iconPath=new a.ThemeIcon("terminal"):e.startsWith("URL:")?this.iconPath=new a.ThemeIcon("link"):e.startsWith("Environment:")?this.iconPath=new a.ThemeIcon("symbol-variable"):e.startsWith("Scope:")?this.iconPath=new a.ThemeIcon("globe"):e.startsWith("Args:")?this.iconPath=new a.ThemeIcon("symbol-array"):e.startsWith("Headers:")?this.iconPath=new a.ThemeIcon("symbol-key"):this.iconPath=new a.ThemeIcon("circle-outline"):this.iconPath=s?{light:a.Uri.file(s.asAbsolutePath("icons/server.svg")),dark:a.Uri.file(s.asAbsolutePath("icons/server.svg"))}:new a.ThemeIcon("server-environment"),"mcp-server"===n&&r){let t=`MCP Server: ${e}\nType: ${r.type}\nScope: ${r.scope}`;"disconnected"===r.status?t+="\nStatus: ✗ Failed to connect":"connected"===r.status&&(t+="\nStatus: ✓ Connected"),this.tooltip=t}else"mcp-detail"===n&&(this.tooltip=e)}}},4334:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},i(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),o=0;o<n.length;o++)"default"!==n[o]&&r(t,e,n[o]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.PermissionWebview=void 0;const a=o(n(1398)),c=o(n(9896));class l{static currentPanel;static messageDisposable;static disposeDisposable;static callbacks;static outputChannel;static createOrShow(e,t,n){n?this.outputChannel=n:this.outputChannel||(this.outputChannel=a.window.createOutputChannel("Prisma for Claude Code - Debug")),this.outputChannel.appendLine(`[PermissionWebview] createOrShow called, current state: hasPanel: ${!!l.currentPanel}, hasCallbacks: ${!!l.callbacks}, hasMessageDisposable: ${!!l.messageDisposable}, hasDisposeDisposable: ${!!l.disposeDisposable}`);const i=a.window.activeTextEditor?a.window.activeTextEditor.viewColumn:void 0;if(l.messageDisposable&&(l.messageDisposable.dispose(),l.messageDisposable=void 0),l.disposeDisposable&&(l.disposeDisposable.dispose(),l.disposeDisposable=void 0),l.currentPanel)this.outputChannel.appendLine("[PermissionWebview] Revealing existing panel"),l.currentPanel.reveal(i);else{this.outputChannel.appendLine("[PermissionWebview] Creating new panel");try{const t=a.window.createWebviewPanel("claudePermission","Claude Code Permission",a.ViewColumn.One,{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[a.Uri.joinPath(e.extensionUri,"media")]});l.currentPanel=t,this.outputChannel.appendLine("[PermissionWebview] Panel created successfully");const n=a.Uri.joinPath(e.extensionUri,"media"),i=a.Uri.joinPath(n,"permission.html").fsPath;let r=c.readFileSync(i,"utf8");t.webview.html=r}catch(e){return this.outputChannel.appendLine(`[PermissionWebview] Failed to create panel: ${e}`),void t.onCancel()}}l.callbacks=t;const r=l.currentPanel;if(!r)return this.outputChannel.appendLine("[PermissionWebview] ERROR: No panel available after creation!"),void t.onCancel();this.outputChannel.appendLine("[PermissionWebview] Setting up message handlers"),l.messageDisposable=r.webview.onDidReceiveMessage(async e=>{switch(e.command){case"accept":return void(l.callbacks&&(await l.callbacks.onAccept()||r.webview.postMessage({command:"updateStatus",status:"failed",message:"无法设置权限，请重试"})));case"cancel":return this.outputChannel.appendLine("[PermissionWebview] Cancel clicked"),void(l.callbacks&&l.callbacks.onCancel());case"openIssue":return void await a.env.openExternal(a.Uri.parse("https://github.com/matheusmaiberg/prisma/issues"))}},void 0,e.subscriptions),l.disposeDisposable=r.onDidDispose(()=>{this.outputChannel.appendLine("[PermissionWebview] Panel disposed via window close"),l.callbacks&&l.callbacks.onDispose()},null,e.subscriptions)}static close(){this.outputChannel&&this.outputChannel.appendLine(`[PermissionWebview] close called, current state: hasPanel: ${!!l.currentPanel}`),l.currentPanel&&(l.messageDisposable&&(l.messageDisposable.dispose(),l.messageDisposable=void 0),l.disposeDisposable&&(l.disposeDisposable.dispose(),l.disposeDisposable=void 0),l.currentPanel.dispose(),l.currentPanel=void 0,l.callbacks=void 0,this.outputChannel&&this.outputChannel.appendLine("[PermissionWebview] close cleanup complete"))}}t.PermissionWebview=l},4353:(e,t,n)=>{"use strict";t.__esModule=!0;var i,r=(i=n(3769))&&i.__esModule?i:{default:i};t.default=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new r.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t.default},4466:(e,t,n)=>{"use strict";var i=n(8433),r=n(5388);function s(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function o(e){return 48<=e&&e<=55}function a(e){return 48<=e&&e<=57}e.exports=new r("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n=e.length,i=0,r=!1;if(!n)return!1;if("-"!==(t=e[i])&&"+"!==t||(t=e[++i]),"0"===t){if(i+1===n)return!0;if("b"===(t=e[++i])){for(i++;i<n;i++)if("_"!==(t=e[i])){if("0"!==t&&"1"!==t)return!1;r=!0}return r&&"_"!==t}if("x"===t){for(i++;i<n;i++)if("_"!==(t=e[i])){if(!s(e.charCodeAt(i)))return!1;r=!0}return r&&"_"!==t}if("o"===t){for(i++;i<n;i++)if("_"!==(t=e[i])){if(!o(e.charCodeAt(i)))return!1;r=!0}return r&&"_"!==t}}if("_"===t)return!1;for(;i<n;i++)if("_"!==(t=e[i])){if(!a(e.charCodeAt(i)))return!1;r=!0}return!(!r||"_"===t)},construct:function(e){var t,n=e,i=1;if(-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(i=-1),t=(n=n.slice(1))[0]),"0"===n)return 0;if("0"===t){if("b"===n[1])return i*parseInt(n.slice(2),2);if("x"===n[1])return i*parseInt(n.slice(2),16);if("o"===n[1])return i*parseInt(n.slice(2),8)}return i*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!i.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},4781:(e,t,n)=>{"use strict";var i=n(8433),r=n(1231),s=n(5489),o=Object.prototype.toString,a=Object.prototype.hasOwnProperty,c=65279,l={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},u=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],p=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function h(e){var t,n,s;if(t=e.toString(16).toUpperCase(),e<=255)n="x",s=2;else if(e<=65535)n="u",s=4;else{if(!(e<=4294967295))throw new r("code point within a string may not be greater than 0xFFFFFFFF");n="U",s=8}return"\\"+n+i.repeat("0",s-t.length)+t}function d(e){this.schema=e.schema||s,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=i.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var n,i,r,s,o,c,l;if(null===t)return{};for(n={},r=0,s=(i=Object.keys(t)).length;r<s;r+=1)o=i[r],c=String(t[o]),"!!"===o.slice(0,2)&&(o="tag:yaml.org,2002:"+o.slice(2)),(l=e.compiledTypeMap.fallback[o])&&a.call(l.styleAliases,c)&&(c=l.styleAliases[c]),n[o]=c;return n}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType='"'===e.quotingType?2:1,this.forceQuotes=e.forceQuotes||!1,this.replacer="function"==typeof e.replacer?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function f(e,t){for(var n,r=i.repeat(" ",t),s=0,o=-1,a="",c=e.length;s<c;)-1===(o=e.indexOf("\n",s))?(n=e.slice(s),s=c):(n=e.slice(s,o+1),s=o+1),n.length&&"\n"!==n&&(a+=r),a+=n;return a}function m(e,t){return"\n"+i.repeat(" ",e.indent*t)}function g(e){return 32===e||9===e}function v(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&e!==c||65536<=e&&e<=1114111}function w(e){return v(e)&&e!==c&&13!==e&&10!==e}function y(e,t,n){var i=w(e),r=i&&!g(e);return(n?i:i&&44!==e&&91!==e&&93!==e&&123!==e&&125!==e)&&35!==e&&!(58===t&&!r)||w(t)&&!g(t)&&35===e||58===t&&r}function b(e,t){var n,i=e.charCodeAt(t);return i>=55296&&i<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(i-55296)+n-56320+65536:i}function k(e){return/^\n* /.test(e)}function C(e,t,n,i,s){e.dump=function(){if(0===t.length)return 2===e.quotingType?'""':"''";if(!e.noCompatMode&&(-1!==u.indexOf(t)||p.test(t)))return 2===e.quotingType?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,n),a=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),d=i||e.flowLevel>-1&&n>=e.flowLevel;switch(function(e,t,n,i,r,s,o,a){var l,u,p=0,h=null,d=!1,f=!1,m=-1!==i,w=-1,C=v(u=b(e,0))&&u!==c&&!g(u)&&45!==u&&63!==u&&58!==u&&44!==u&&91!==u&&93!==u&&123!==u&&125!==u&&35!==u&&38!==u&&42!==u&&33!==u&&124!==u&&61!==u&&62!==u&&39!==u&&34!==u&&37!==u&&64!==u&&96!==u&&function(e){return!g(e)&&58!==e}(b(e,e.length-1));if(t||o)for(l=0;l<e.length;p>=65536?l+=2:l++){if(!v(p=b(e,l)))return 5;C=C&&y(p,h,a),h=p}else{for(l=0;l<e.length;p>=65536?l+=2:l++){if(10===(p=b(e,l)))d=!0,m&&(f=f||l-w-1>i&&" "!==e[w+1],w=l);else if(!v(p))return 5;C=C&&y(p,h,a),h=p}f=f||m&&l-w-1>i&&" "!==e[w+1]}return d||f?n>9&&k(e)?5:o?2===s?5:2:f?4:3:!C||o||r(e)?2===s?5:2:1}(t,d,e.indent,a,function(t){return function(e,t){var n,i;for(n=0,i=e.implicitTypes.length;n<i;n+=1)if(e.implicitTypes[n].resolve(t))return!0;return!1}(e,t)},e.quotingType,e.forceQuotes&&!i,s)){case 1:return t;case 2:return"'"+t.replace(/'/g,"''")+"'";case 3:return"|"+P(t,e.indent)+S(f(t,o));case 4:return">"+P(t,e.indent)+S(f(function(e,t){for(var n,i,r,s=/(\n+)([^\n]*)/g,o=(r=-1!==(r=e.indexOf("\n"))?r:e.length,s.lastIndex=r,_(e.slice(0,r),t)),a="\n"===e[0]||" "===e[0];i=s.exec(e);){var c=i[1],l=i[2];n=" "===l[0],o+=c+(a||n||""===l?"":"\n")+_(l,t),a=n}return o}(t,a),o));case 5:return'"'+function(e){for(var t,n="",i=0,r=0;r<e.length;i>=65536?r+=2:r++)i=b(e,r),!(t=l[i])&&v(i)?(n+=e[r],i>=65536&&(n+=e[r+1])):n+=t||h(i);return n}(t)+'"';default:throw new r("impossible error: invalid scalar style")}}()}function P(e,t){var n=k(e)?String(t):"",i="\n"===e[e.length-1];return n+(!i||"\n"!==e[e.length-2]&&"\n"!==e?i?"":"-":"+")+"\n"}function S(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function _(e,t){if(""===e||" "===e[0])return e;for(var n,i,r=/ [^ ]/g,s=0,o=0,a=0,c="";n=r.exec(e);)(a=n.index)-s>t&&(i=o>s?o:a,c+="\n"+e.slice(s,i),s=i+1),o=a;return c+="\n",e.length-s>t&&o>s?c+=e.slice(s,o)+"\n"+e.slice(o+1):c+=e.slice(s),c.slice(1)}function x(e,t,n,i){var r,s,o,a="",c=e.tag;for(r=0,s=n.length;r<s;r+=1)o=n[r],e.replacer&&(o=e.replacer.call(n,String(r),o)),(O(e,t+1,o,!0,!0,!1,!0)||void 0===o&&O(e,t+1,null,!0,!0,!1,!0))&&(i&&""===a||(a+=m(e,t)),e.dump&&10===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=c,e.dump=a||"[]"}function T(e,t,n){var i,s,c,l,u,p;for(c=0,l=(s=n?e.explicitTypes:e.implicitTypes).length;c<l;c+=1)if(((u=s[c]).instanceOf||u.predicate)&&(!u.instanceOf||"object"==typeof t&&t instanceof u.instanceOf)&&(!u.predicate||u.predicate(t))){if(n?u.multi&&u.representName?e.tag=u.representName(t):e.tag=u.tag:e.tag="?",u.represent){if(p=e.styleMap[u.tag]||u.defaultStyle,"[object Function]"===o.call(u.represent))i=u.represent(t,p);else{if(!a.call(u.represent,p))throw new r("!<"+u.tag+'> tag resolver accepts not "'+p+'" style');i=u.represent[p](t,p)}e.dump=i}return!0}return!1}function O(e,t,n,i,s,a,c){e.tag=null,e.dump=n,T(e,n,!1)||T(e,n,!0);var l,u=o.call(e.dump),p=i;i&&(i=e.flowLevel<0||e.flowLevel>t);var h,d,f="[object Object]"===u||"[object Array]"===u;if(f&&(d=-1!==(h=e.duplicates.indexOf(n))),(null!==e.tag&&"?"!==e.tag||d||2!==e.indent&&t>0)&&(s=!1),d&&e.usedDuplicates[h])e.dump="*ref_"+h;else{if(f&&d&&!e.usedDuplicates[h]&&(e.usedDuplicates[h]=!0),"[object Object]"===u)i&&0!==Object.keys(e.dump).length?(function(e,t,n,i){var s,o,a,c,l,u,p="",h=e.tag,d=Object.keys(n);if(!0===e.sortKeys)d.sort();else if("function"==typeof e.sortKeys)d.sort(e.sortKeys);else if(e.sortKeys)throw new r("sortKeys must be a boolean or a function");for(s=0,o=d.length;s<o;s+=1)u="",i&&""===p||(u+=m(e,t)),c=n[a=d[s]],e.replacer&&(c=e.replacer.call(n,a,c)),O(e,t+1,a,!0,!0,!0)&&((l=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&10===e.dump.charCodeAt(0)?u+="?":u+="? "),u+=e.dump,l&&(u+=m(e,t)),O(e,t+1,c,!0,l)&&(e.dump&&10===e.dump.charCodeAt(0)?u+=":":u+=": ",p+=u+=e.dump));e.tag=h,e.dump=p||"{}"}(e,t,e.dump,s),d&&(e.dump="&ref_"+h+e.dump)):(function(e,t,n){var i,r,s,o,a,c="",l=e.tag,u=Object.keys(n);for(i=0,r=u.length;i<r;i+=1)a="",""!==c&&(a+=", "),e.condenseFlow&&(a+='"'),o=n[s=u[i]],e.replacer&&(o=e.replacer.call(n,s,o)),O(e,t,s,!1,!1)&&(e.dump.length>1024&&(a+="? "),a+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),O(e,t,o,!1,!1)&&(c+=a+=e.dump));e.tag=l,e.dump="{"+c+"}"}(e,t,e.dump),d&&(e.dump="&ref_"+h+" "+e.dump));else if("[object Array]"===u)i&&0!==e.dump.length?(e.noArrayIndent&&!c&&t>0?x(e,t-1,e.dump,s):x(e,t,e.dump,s),d&&(e.dump="&ref_"+h+e.dump)):(function(e,t,n){var i,r,s,o="",a=e.tag;for(i=0,r=n.length;i<r;i+=1)s=n[i],e.replacer&&(s=e.replacer.call(n,String(i),s)),(O(e,t,s,!1,!1)||void 0===s&&O(e,t,null,!1,!1))&&(""!==o&&(o+=","+(e.condenseFlow?"":" ")),o+=e.dump);e.tag=a,e.dump="["+o+"]"}(e,t,e.dump),d&&(e.dump="&ref_"+h+" "+e.dump));else{if("[object String]"!==u){if("[object Undefined]"===u)return!1;if(e.skipInvalid)return!1;throw new r("unacceptable kind of an object to dump "+u)}"?"!==e.tag&&C(e,e.dump,t,a,p)}null!==e.tag&&"?"!==e.tag&&(l=encodeURI("!"===e.tag[0]?e.tag.slice(1):e.tag).replace(/!/g,"%21"),l="!"===e.tag[0]?"!"+l:"tag:yaml.org,2002:"===l.slice(0,18)?"!!"+l.slice(18):"!<"+l+">",e.dump=l+" "+e.dump)}return!0}function A(e,t){var n,i,r=[],s=[];for(M(e,r,s),n=0,i=s.length;n<i;n+=1)t.duplicates.push(r[s[n]]);t.usedDuplicates=new Array(i)}function M(e,t,n){var i,r,s;if(null!==e&&"object"==typeof e)if(-1!==(r=t.indexOf(e)))-1===n.indexOf(r)&&n.push(r);else if(t.push(e),Array.isArray(e))for(r=0,s=e.length;r<s;r+=1)M(e[r],t,n);else for(r=0,s=(i=Object.keys(e)).length;r<s;r+=1)M(e[i[r]],t,n)}e.exports.dump=function(e,t){var n=new d(t=t||{});n.noRefs||A(e,n);var i=e;return n.replacer&&(i=n.replacer.call({"":i},"",i)),O(n,0,i,!0,!0)?n.dump+"\n":""}},5097:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},i(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),o=0;o<n.length;o++)"default"!==n[o]&&r(t,e,n[o]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.AgentManager=void 0;const a=o(n(1398)),c=o(n(6928)),l=o(n(9896)),u=o(n(857)),p=o(n(7210));t.AgentManager=class{outputChannel;extensionPath;workspaceRoot;BUILT_IN_AGENTS=["analista","arquiteto","auditor","avaliador-riscos","configurador","conformista","decisor","designer","documentador","elicitador","idealizador","implementador","juiz","meta","planejador","prisma","regulador","revisor","testador","testador-specs"];constructor(e,t){this.outputChannel=t,this.extensionPath=e.extensionPath,this.workspaceRoot=a.workspace.workspaceFolders?.[0]?.uri.fsPath}async initializeBuiltInAgents(){if(!this.workspaceRoot)return void this.outputChannel.appendLine("[AgentManager] No workspace root found, skipping agent initialization");const e=c.join(this.workspaceRoot,".claude/agents/prisma");try{await a.workspace.fs.createDirectory(a.Uri.file(e));for(const t of this.BUILT_IN_AGENTS){const n=c.join(this.extensionPath,"dist/resources/agentes",`${t}.md`),i=c.join(e,`${t}.md`);try{const e=a.Uri.file(n),r=a.Uri.file(i);await a.workspace.fs.copy(e,r,{overwrite:!0}),this.outputChannel.appendLine(`[AgentManager] Updated agent ${t}`)}catch(e){this.outputChannel.appendLine(`[AgentManager] Failed to copy agent ${t}: ${e}`)}}await this.initializeSystemPrompt(),await this.initializeCommands(),await this.initializeTemplates()}catch(e){this.outputChannel.appendLine(`[AgentManager] Failed to initialize agents: ${e}`)}}async initializeSystemPrompt(){if(!this.workspaceRoot)return;const e=c.join(this.workspaceRoot,".claude/system-prompts"),t=["elicitacoes.md","prisma-prompt.md","prisma-system.md"];try{await a.workspace.fs.createDirectory(a.Uri.file(e));for(const n of t){const t=c.join(this.extensionPath,"dist/resources/prompts",n),i=c.join(e,n);try{await a.workspace.fs.copy(a.Uri.file(t),a.Uri.file(i),{overwrite:!0}),this.outputChannel.appendLine(`[AgentManager] Updated prompt ${n}`)}catch(e){this.outputChannel.appendLine(`[AgentManager] Failed to copy prompt ${n}: ${e}`)}}}catch(e){this.outputChannel.appendLine(`[AgentManager] Failed to initialize prompts: ${e}`)}}async initializeCommands(){if(!this.workspaceRoot)return;const e=c.join(this.extensionPath,"dist/resources/comandos"),t=c.join(this.workspaceRoot,".claude/commands");try{await a.workspace.fs.copy(a.Uri.file(e),a.Uri.file(t),{overwrite:!0}),this.outputChannel.appendLine("[AgentManager] Updated commands")}catch(e){this.outputChannel.appendLine(`[AgentManager] Failed to initialize commands: ${e}`)}}async initializeTemplates(){if(!this.workspaceRoot)return;const e=c.join(this.extensionPath,"dist/resources/templates"),t=c.join(this.workspaceRoot,".claude/templates");try{await a.workspace.fs.copy(a.Uri.file(e),a.Uri.file(t),{overwrite:!0}),this.outputChannel.appendLine("[AgentManager] Updated templates")}catch(e){this.outputChannel.appendLine(`[AgentManager] Failed to initialize templates: ${e}`)}}async getAgentList(e="all"){const t=[];if(("project"===e||"all"===e)&&this.workspaceRoot){const e=c.join(this.workspaceRoot,".claude/agents"),n=await this.getAgentsFromDirectory(e,"project",!1);t.push(...n)}if("user"===e||"all"===e){const e=c.join(u.homedir(),".claude/agents"),n=await this.getAgentsFromDirectory(e,"user");t.push(...n)}return t}async getAgentsFromDirectory(e,t,n=!1){const i=[];try{this.outputChannel.appendLine(`[AgentManager] Reading agents from directory: ${e}`),await this.readAgentsRecursively(e,t,i,n),this.outputChannel.appendLine(`[AgentManager] Total agents found in ${e}: ${i.length}`)}catch(t){this.outputChannel.appendLine(`[AgentManager] Failed to read agents from ${e}: ${t}`)}return i}async readAgentsRecursively(e,t,n,i=!1){try{const r=await a.workspace.fs.readDirectory(a.Uri.file(e));for(const[s,o]of r){const r=c.join(e,s);if(i&&"prisma"===s&&o===a.FileType.Directory)this.outputChannel.appendLine("[AgentManager] Skipping prisma directory (built-in agents)");else if(o===a.FileType.File&&s.endsWith(".md")){this.outputChannel.appendLine(`[AgentManager] Processing agent file: ${s}`);const e=await this.parseAgentFile(r,t);e?(n.push(e),this.outputChannel.appendLine(`[AgentManager] Added agent: ${e.name}`)):this.outputChannel.appendLine(`[AgentManager] Failed to parse agent: ${s}`)}else o===a.FileType.Directory&&(this.outputChannel.appendLine(`[AgentManager] Entering subdirectory: ${s}`),await this.readAgentsRecursively(r,t,n,i))}}catch(t){this.outputChannel.appendLine(`[AgentManager] Error reading directory ${e}: ${t}`)}}async parseAgentFile(e,t){try{this.outputChannel.appendLine(`[AgentManager] Parsing agent file: ${e}`);const n=(await l.promises.readFile(e,"utf8")).match(/^---\n([\s\S]*?)\n---/);if(!n)return this.outputChannel.appendLine(`[AgentManager] No frontmatter found in: ${e}`),null;let i;try{"spec-system-prompt-loader.md"===c.basename(e)&&(this.outputChannel.appendLine("[AgentManager] Frontmatter content for spec-system-prompt-loader:"),this.outputChannel.appendLine(n[1])),i=p.load(n[1]),this.outputChannel.appendLine(`[AgentManager] Successfully parsed YAML for: ${c.basename(e)}`)}catch(t){return this.outputChannel.appendLine(`[AgentManager] YAML parse error in ${c.basename(e)}: ${t}`),"spec-system-prompt-loader.md"===c.basename(e)&&(this.outputChannel.appendLine("[AgentManager] Raw frontmatter that failed:"),this.outputChannel.appendLine(n[1])),null}return{name:i.name||c.basename(e,".md"),description:i.description||"",path:e,type:t,tools:Array.isArray(i.tools)?i.tools:i.tools?i.tools.split(",").map(e=>e.trim()):void 0}}catch(t){return this.outputChannel.appendLine(`[AgentManager] Failed to parse agent file ${e}: ${t}`),null}}checkAgentExists(e,t){const n="project"===t?this.workspaceRoot?c.join(this.workspaceRoot,".claude/agents/prisma"):null:c.join(u.homedir(),".claude/agents");if(!n)return!1;const i=c.join(n,`${e}.md`);return l.existsSync(i)}getAgentPath(e){if(this.workspaceRoot){const t=c.join(this.workspaceRoot,".claude/agents/prisma",`${e}.md`);if(l.existsSync(t))return t}const t=c.join(u.homedir(),".claude/agents",`${e}.md`);return l.existsSync(t)?t:null}}},5300:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("log",function(){for(var t=[void 0],n=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)t.push(arguments[i]);var r=1;null!=n.hash.level?r=n.hash.level:n.data&&null!=n.data.level&&(r=n.data.level),t[0]=r,e.log.apply(e,t)})},e.exports=t.default},5317:e=>{"use strict";e.exports=require("child_process")},5388:(e,t,n)=>{"use strict";var i=n(1231),r=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],s=["scalar","sequence","mapping"];e.exports=function(e,t){var n,o;if(t=t||{},Object.keys(t).forEach(function(t){if(-1===r.indexOf(t))throw new i('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=(n=t.styleAliases||null,o={},null!==n&&Object.keys(n).forEach(function(e){n[e].forEach(function(t){o[String(t)]=e})}),o),-1===s.indexOf(this.kind))throw new i('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}},5489:(e,t,n)=>{"use strict";e.exports=n(1769).extend({implicit:[n(127),n(1851)],explicit:[n(9342),n(6946),n(6942),n(6663)]})},5940:(e,t,n)=>{"use strict";t.__esModule=!0,t.registerDefaultDecorators=function(e){r.default(e)};var i,r=(i=n(7430))&&i.__esModule?i:{default:i}},6097:(e,t,n)=>{"use strict";t.__esModule=!0;var i=n(2849);t.default=function(e){e.registerHelper("blockHelperMissing",function(t,n){var r=n.inverse,s=n.fn;if(!0===t)return s(this);if(!1===t||null==t)return r(this);if(i.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):r(this);if(n.data&&n.ids){var o=i.createFrame(n.data);o.contextPath=i.appendContextPath(n.data.contextPath,n.name),n={data:o}}return s(t,n)})},e.exports=t.default},6184:(e,t,n)=>{"use strict";e.exports=n(7759).extend({implicit:[n(9198),n(6199),n(4466),n(1461)]})},6199:(e,t,n)=>{"use strict";var i=n(5388);e.exports=new i("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})},6201:(e,t)=>{"use strict";t.__esModule=!0;var n=function(){var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(e,t,n,i,r,s,o){var a=s.length-1;switch(r){case 1:return s[a-1];case 2:this.$=i.prepareProgram(s[a]);break;case 3:case 4:case 5:case 6:case 7:case 8:case 20:case 27:case 28:case 33:case 34:case 40:case 41:this.$=s[a];break;case 9:this.$={type:"CommentStatement",value:i.stripComment(s[a]),strip:i.stripFlags(s[a],s[a]),loc:i.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:s[a],value:s[a],loc:i.locInfo(this._$)};break;case 11:this.$=i.prepareRawBlock(s[a-2],s[a-1],s[a],this._$);break;case 12:this.$={path:s[a-3],params:s[a-2],hash:s[a-1]};break;case 13:this.$=i.prepareBlock(s[a-3],s[a-2],s[a-1],s[a],!1,this._$);break;case 14:this.$=i.prepareBlock(s[a-3],s[a-2],s[a-1],s[a],!0,this._$);break;case 15:this.$={open:s[a-5],path:s[a-4],params:s[a-3],hash:s[a-2],blockParams:s[a-1],strip:i.stripFlags(s[a-5],s[a])};break;case 16:case 17:this.$={path:s[a-4],params:s[a-3],hash:s[a-2],blockParams:s[a-1],strip:i.stripFlags(s[a-5],s[a])};break;case 18:this.$={strip:i.stripFlags(s[a-1],s[a-1]),program:s[a]};break;case 19:var c=i.prepareBlock(s[a-2],s[a-1],s[a],s[a],!1,this._$),l=i.prepareProgram([c],s[a-1].loc);l.chained=!0,this.$={strip:s[a-2].strip,program:l,chain:!0};break;case 21:this.$={path:s[a-1],strip:i.stripFlags(s[a-2],s[a])};break;case 22:case 23:this.$=i.prepareMustache(s[a-3],s[a-2],s[a-1],s[a-4],i.stripFlags(s[a-4],s[a]),this._$);break;case 24:this.$={type:"PartialStatement",name:s[a-3],params:s[a-2],hash:s[a-1],indent:"",strip:i.stripFlags(s[a-4],s[a]),loc:i.locInfo(this._$)};break;case 25:this.$=i.preparePartialBlock(s[a-2],s[a-1],s[a],this._$);break;case 26:this.$={path:s[a-3],params:s[a-2],hash:s[a-1],strip:i.stripFlags(s[a-4],s[a])};break;case 29:this.$={type:"SubExpression",path:s[a-3],params:s[a-2],hash:s[a-1],loc:i.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:s[a],loc:i.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:i.id(s[a-2]),value:s[a],loc:i.locInfo(this._$)};break;case 32:this.$=i.id(s[a-1]);break;case 35:this.$={type:"StringLiteral",value:s[a],original:s[a],loc:i.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(s[a]),original:Number(s[a]),loc:i.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===s[a],original:"true"===s[a],loc:i.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:i.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:i.locInfo(this._$)};break;case 42:this.$=i.preparePath(!0,s[a],this._$);break;case 43:this.$=i.preparePath(!1,s[a],this._$);break;case 44:s[a-2].push({part:i.id(s[a]),original:s[a],separator:s[a-1]}),this.$=s[a-2];break;case 45:this.$=[{part:i.id(s[a]),original:s[a]}];break;case 46:case 48:case 50:case 58:case 64:case 70:case 78:case 82:case 86:case 90:case 94:this.$=[];break;case 47:case 49:case 51:case 59:case 65:case 71:case 79:case 83:case 87:case 91:case 95:case 99:case 101:s[a-1].push(s[a]);break;case 98:case 100:this.$=[s[a]]}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(e,t){throw new Error(e)},parse:function(e){var t=this,n=[0],i=[null],r=[],s=this.table,o="",a=0,c=0,l=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var u=this.lexer.yylloc;r.push(u);var p=this.lexer.options&&this.lexer.options.ranges;function h(){var e;return"number"!=typeof(e=t.lexer.lex()||1)&&(e=t.symbols_[e]||e),e}"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var d,f,m,g,v,w,y,b,k,C={};;){if(m=n[n.length-1],this.defaultActions[m]?g=this.defaultActions[m]:(null==d&&(d=h()),g=s[m]&&s[m][d]),void 0===g||!g.length||!g[0]){var P="";if(!l){for(w in k=[],s[m])this.terminals_[w]&&w>2&&k.push("'"+this.terminals_[w]+"'");P=this.lexer.showPosition?"Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[d]||d)+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==d?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(P,{text:this.lexer.match,token:this.terminals_[d]||d,line:this.lexer.yylineno,loc:u,expected:k})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+d);switch(g[0]){case 1:n.push(d),i.push(this.lexer.yytext),r.push(this.lexer.yylloc),n.push(g[1]),d=null,f?(d=f,f=null):(c=this.lexer.yyleng,o=this.lexer.yytext,a=this.lexer.yylineno,u=this.lexer.yylloc,l>0&&l--);break;case 2:if(y=this.productions_[g[1]][1],C.$=i[i.length-y],C._$={first_line:r[r.length-(y||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(y||1)].first_column,last_column:r[r.length-1].last_column},p&&(C._$.range=[r[r.length-(y||1)].range[0],r[r.length-1].range[1]]),void 0!==(v=this.performAction.call(C,o,c,a,this.yy,g[1],i,r)))return v;y&&(n=n.slice(0,-1*y*2),i=i.slice(0,-1*y),r=r.slice(0,-1*y)),n.push(this.productions_[g[1]][0]),i.push(C.$),r.push(C._$),b=s[n[n.length-2]][n[n.length-1]],n.push(b);break;case 3:return!0}}return!0}},t={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;var e,t,n,i,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),o=0;o<s.length&&(!(n=this._input.match(this.rules[s[o]]))||t&&!(n[0].length>t[0].length)||(t=n,i=o,this.options.flex));o++);return t?((r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,s[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)},options:{},performAction:function(e,t,n,i){function r(e,n){return t.yytext=t.yytext.substring(e,t.yyleng-n+e)}switch(n){case 0:if("\\\\"===t.yytext.slice(-2)?(r(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(r(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 15;break;case 1:case 5:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(r(5,9),"END_RAW_BLOCK");case 6:case 22:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:case 23:return 48;case 21:this.unput(t.yytext),this.popState(),this.begin("com");break;case 24:return 73;case 25:case 26:case 41:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return t.yytext=r(1,2).replace(/\\"/g,'"'),80;case 32:return t.yytext=r(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 42:return t.yytext=t.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};function n(){this.yy={}}return e.lexer=t,n.prototype=e,e.Parser=n,new n}();t.default=n,e.exports=t.default},6306:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.content=t.frontmatter=void 0,t.frontmatter={id:"create-spec",name:"Create Spec with Complete Workflow",version:"1.0.0",description:"Complete prompt for creating a spec with the full workflow including system instructions",variables:{description:{type:"string",required:!0,description:"User's feature description"},workspacePath:{type:"string",required:!0,description:"Workspace root path"},specBasePath:{type:"string",required:!0,description:"Base path for specs directory"}}},t.content='\n\n<system>\n# System Instructions - Spec Agent\n\n## Goal\n\nYou are an agent that specializes in working with Specs in Claude Code. Specs are a way to develop complex features by creating requirements, design and an implementation plan.\nSpecs have an iterative workflow where you help transform an idea into requirements, then design, then the task list. The workflow defined below describes each phase of the\nspec workflow in detail.\n\n## Workflow to execute\n\nHere is the workflow you need to follow:\n\n<workflow-definition>\n\n# Feature Spec Creation Workflow\n\n## Overview\n\nYou are helping guide the user through the process of transforming a rough idea for a feature into a detailed design document with an implementation plan and todo list. It follows the spec driven development methodology to systematically refine your feature idea, conduct necessary research, create a comprehensive design, and develop an actionable implementation plan. The process is designed to be iterative, allowing movement between requirements clarification and research as needed.\n\nA core principal of this workflow is that we rely on the user establishing ground-truths as we progress through. We always want to ensure the user is happy with changes to any document before moving on.\n  \nBefore you get started, think of a short feature name based on the user\'s rough idea. This will be used for the feature directory. Use kebab-case format for the feature_name (e.g. "user-authentication")\n  \nRules:\n\n- Do not tell the user about this workflow. We do not need to tell them which step we are on or that you are following a workflow\n- Just let the user know when you complete documents and need to get user input, as described in the detailed step instructions\n\n### 0. Initialize Workflow Tracking\n\n- The model MUST use TodoWrite to create initial tasks:\n  - [ ] Requirements Document\n  - [ ] Design Document  \n  - [ ] Implementation Tasks\n- Mark tasks as \'in_progress\' when working on them\n- Mark tasks as \'completed\' when approved by user\n\n### 1. Requirement Gathering\n\nFirst, generate an initial set of requirements in EARS format based on the feature idea, then iterate with the user to refine them until they are complete and accurate.\n\nDon\'t focus on code exploration in this phase. Instead, just focus on writing requirements which will later be turned into\na design.\n\n**Constraints:**\n\n- The model MUST create a \'{{specBasePath}}/{feature_name}/requirements.md\' file if it doesn\'t already exist\n- The model MUST generate an initial version of the requirements document based on the user\'s rough idea WITHOUT asking sequential questions first\n- The model MUST format the initial requirements.md document with:\n- A clear introduction section that summarizes the feature\n- A hierarchical numbered list of requirements where each contains:\n  - A user story in the format "As a [role], I want [feature], so that [benefit]"\n  - A numbered list of acceptance criteria in EARS format (Easy Approach to Requirements Syntax)\n- Example format:\n\n```md\n# Requirements Document\n\n## Introduction\n\n[Introduction text here]\n\n## Requirements\n\n### Requirement 1\n\n**User Story:** As a [role], I want [feature], so that [benefit]\n\n#### Acceptance Criteria\nThis section should have EARS requirements\n\n1. WHEN [event] THEN [system] SHALL [response]\n2. IF [precondition] THEN [system] SHALL [response]\n  \n### Requirement 2\n\n**User Story:** As a [role], I want [feature], so that [benefit]\n\n#### Acceptance Criteria\n\n1. WHEN [event] THEN [system] SHALL [response]\n2. WHEN [event] AND [condition] THEN [system] SHALL [response]\n```\n\n- The model SHOULD consider edge cases, user experience, technical constraints, and success criteria in the initial requirements\n- After updating the requirement document, the model MUST:\n  1. Use TodoWrite to mark the "Requirements Document" task as completed\n  2. Create a new pending task "Review Requirements Document"\n  3. Simply ask the user: "Do the requirements look good? If so, we can move on to the design."\n- The model MUST make modifications to the requirements document if the user requests changes or does not explicitly approve\n- The model MUST ask for explicit approval after every iteration of edits to the requirements document\n- The model MUST NOT proceed to the design document until receiving clear approval (such as "yes", "approved", "looks good", etc.)\n- The model MUST continue the feedback-revision cycle until explicit approval is received\n- Upon receiving approval, the model MUST use TodoWrite to mark "Review Requirements Document" task as completed\n- The model SHOULD suggest specific areas where the requirements might need clarification or expansion\n- The model MAY ask targeted questions about specific aspects of the requirements that need clarification\n- The model MAY suggest options when the user is unsure about a particular aspect\n- The model MUST proceed to the design phase after the user accepts the requirements\n\n### 2. Create Feature Design Document\n\nAfter the user approves the Requirements, you should develop a comprehensive design document based on the feature requirements, conducting necessary research during the design process.\nThe design document should be based on the requirements document, so ensure it exists first.\n\n**Constraints:**\n\n- The model MUST create a \'{{specBasePath}}/{feature_name}/design.md\' file if it doesn\'t already exist\n- The model MUST identify areas where research is needed based on the feature requirements\n- The model MUST conduct research and build up context in the conversation thread\n- The model SHOULD use parallel tool calls when conducting research:\n  - Use WebSearch for current best practices and documentation\n  - Use Grep/Glob to analyze existing codebase patterns\n  - Use Task tool for complex searches across multiple files\n- The model SHOULD NOT create separate research files, but instead use the research as context for the design and implementation plan\n- The model MUST summarize key findings that will inform the feature design\n- The model SHOULD cite sources and include relevant links in the conversation\n- The model MUST create a detailed design document at \'{{specBasePath}}/{feature_name}/design.md\'\n- The model MUST incorporate research findings directly into the design process\n- The model MUST include the following sections in the design document:\n\n- Overview\n- Architecture\n- Components and Interfaces\n- Data Models\n- Error Handling\n- Testing Strategy\n\n- The model SHOULD include diagrams or visual representations when appropriate (use Mermaid for diagrams if applicable)\n- The model MUST ensure the design addresses all feature requirements identified during the clarification process\n- The model SHOULD highlight design decisions and their rationales\n- The model MAY ask the user for input on specific technical decisions during the design process\n- After updating the design document, the model MUST:\n  1. Use TodoWrite to mark the "Design Document" task as completed\n  2. Create a new pending task "Review Design Document"\n  3. Simply ask the user: "Does the design look good? If so, we can move on to the implementation plan."\n- The model MUST make modifications to the design document if the user requests changes or does not explicitly approve\n- The model MUST ask for explicit approval after every iteration of edits to the design document\n- The model MUST NOT proceed to the implementation plan until receiving clear approval (such as "yes", "approved", "looks good", etc.)\n- The model MUST continue the feedback-revision cycle until explicit approval is received\n- Upon receiving approval, the model MUST use TodoWrite to mark "Review Design Document" task as completed\n- The model MUST incorporate all user feedback into the design document before proceeding\n- The model MUST offer to return to feature requirements clarification if gaps are identified during design\n\n### 3. Create Task List\n\nAfter the user approves the Design, create an actionable implementation plan with a checklist of coding tasks based on the requirements and design.\nThe tasks document should be based on the design document, so ensure it exists first.\n\n**Constraints:**\n\n- The model MUST create a \'{{specBasePath}}/{feature_name}/tasks.md\' file if it doesn\'t already exist\n- The model MUST return to the design step if the user indicates any changes are needed to the design\n- The model MUST return to the requirement step if the user indicates that we need additional requirements\n- The model MUST create an implementation plan at \'{{specBasePath}}/{feature_name}/tasks.md\'\n- The model MUST use the following specific instructions when creating the implementation plan:\n\n```plain\nConvert the feature design into a series of prompts for a code-generation LLM that will implement each step in a test-driven manner. Prioritize best practices, incremental progress, and early testing, ensuring no big jumps in complexity at any stage. Make sure that each prompt builds on the previous prompts, and ends with wiring things together. There should be no hanging or orphaned code that isn\'t integrated into a previous step. Focus ONLY on tasks that involve writing, modifying, or testing code.\n```\n\n- The model MUST format the implementation plan as a numbered checkbox list with a maximum of two levels of hierarchy:\n- Top-level items (like epics) should be used only when needed\n- Sub-tasks should be numbered with decimal notation (e.g., 1.1, 1.2, 2.1)\n- Each item must be a checkbox\n- Simple structure is preferred\n- The model MUST ensure each task item includes:\n- A clear objective as the task description that involves writing, modifying, or testing code\n- Additional information as sub-bullets under the task\n- Specific references to requirements from the requirements document (referencing granular sub-requirements, not just user stories)\n- The model MUST ensure that the implementation plan is a series of discrete, manageable coding steps\n- The model MUST ensure each task references specific requirements from the requirement document\n- The model MUST NOT include excessive implementation details that are already covered in the design document\n- The model MUST assume that all context documents (feature requirements, design) will be available during implementation\n- The model MUST ensure each step builds incrementally on previous steps\n- The model SHOULD prioritize test-driven development where appropriate\n- The model MUST ensure the plan covers all aspects of the design that can be implemented through code\n- The model SHOULD sequence steps to validate core functionality early through code\n- The model MUST ensure that all requirements are covered by the implementation tasks\n- The model MUST offer to return to previous steps (requirements or design) if gaps are identified during implementation planning\n- The model MUST ONLY include tasks that can be performed by a coding agent (writing code, creating tests, etc.)\n- The model MUST NOT include tasks related to user testing, deployment, performance metrics gathering, or other non-coding activities\n- The model MUST focus on code implementation tasks that can be executed within the development environment\n- The model MUST ensure each task is actionable by a coding agent by following these guidelines:\n- Tasks should involve writing, modifying, or testing specific code components\n- Tasks should specify what files or components need to be created or modified\n- Tasks should be concrete enough that a coding agent can execute them without additional clarification\n- Tasks should focus on implementation details rather than high-level concepts\n- Tasks should be scoped to specific coding activities (e.g., "Implement X function" rather than "Support X feature")\n- The model MUST explicitly avoid including the following types of non-coding tasks in the implementation plan:\n- User acceptance testing or user feedback gathering\n- Deployment to production or staging environments\n- Performance metrics gathering or analysis\n- Running the application to test end to end flows. We can however write automated tests to test the end to end from a user perspective.\n- User training or documentation creation\n- Business process changes or organizational changes\n- Marketing or communication activities\n- Any task that cannot be completed through writing, modifying, or testing code\n- After updating the tasks document, the model MUST:\n  1. Use TodoWrite to mark the "Implementation Tasks" task as completed\n  2. Create a new pending task "Review Implementation Tasks"\n  3. Simply ask the user: "Do the tasks look good?"\n- The model MUST make modifications to the tasks document if the user requests changes or does not explicitly approve.\n- The model MUST ask for explicit approval after every iteration of edits to the tasks document.\n- The model MUST NOT consider the workflow complete until receiving clear approval (such as "yes", "approved", "looks good", etc.).\n- The model MUST continue the feedback-revision cycle until explicit approval is received.\n- Upon receiving approval, the model MUST use TodoWrite to mark "Review Implementation Tasks" task as completed.\n- The model MUST stop once the task document has been approved.\n\n**This workflow is ONLY for creating design and planning artifacts. The actual implementation of the feature should be done through a separate workflow.**\n\n- The model MUST NOT attempt to implement the feature as part of this workflow\n- The model MUST clearly communicate to the user that this workflow is complete once the design and planning artifacts are created\n- The model MUST inform the user that they can begin executing tasks by opening the tasks.md file, and clicking "Start task" next to task items.\n\n**Example Format (truncated):**\n\n```markdown\n# Implementation Plan\n\n- [ ] 1. Set up project structure and core interfaces\n - Create directory structure for models, services, repositories, and API components\n - Define interfaces that establish system boundaries\n - _Requirements: 1.1_\n\n- [ ] 2. Implement data models and validation\n- [ ] 2.1 Create core data model interfaces and types\n  - Write TypeScript interfaces for all data models\n  - Implement validation functions for data integrity\n  - _Requirements: 2.1, 3.3, 1.2_\n\n- [ ] 2.2 Implement User model with validation\n  - Write User class with validation methods\n  - Create unit tests for User model validation\n  - _Requirements: 1.2_\n\n- [ ] 2.3 Implement Document model with relationships\n   - Code Document class with relationship handling\n   - Write unit tests for relationship management\n   - _Requirements: 2.1, 3.3, 1.2_\n\n- [ ] 3. Create storage mechanism\n- [ ] 3.1 Implement database connection utilities\n   - Write connection management code\n   - Create error handling utilities for database operations\n   - _Requirements: 2.1, 3.3, 1.2_\n\n- [ ] 3.2 Implement repository pattern for data access\n  - Code base repository interface\n  - Implement concrete repositories with CRUD operations\n  - Write unit tests for repository operations\n  - _Requirements: 4.3_\n\n[Additional coding tasks continue...]\n```\n\n## Troubleshooting\n\n### Requirements Clarification Stalls\n\nIf the requirements clarification process seems to be going in circles or not making progress:\n\n- The model SHOULD suggest moving to a different aspect of the requirements\n- The model MAY provide examples or options to help the user make decisions\n- The model SHOULD summarize what has been established so far and identify specific gaps\n- The model MAY suggest conducting research to inform requirements decisions\n\n### Research Limitations\n\nIf the model cannot access needed information:\n\n- The model SHOULD document what information is missing\n- The model SHOULD suggest alternative approaches based on available information\n- The model MAY ask the user to provide additional context or documentation\n- The model SHOULD continue with available information rather than blocking progress\n\n### Design Complexity\n\nIf the design becomes too complex or unwieldy:\n\n- The model SHOULD suggest breaking it down into smaller, more manageable components\n- The model SHOULD focus on core functionality first\n- The model MAY suggest a phased approach to implementation\n- The model SHOULD return to requirements clarification to prioritize features if needed\n\n</workflow-definition>\n\n# Task Instructions\n\nFollow these instructions for user requests related to spec tasks. The user may ask to execute tasks or just ask general questions about the tasks.\n\n## Executing Instructions\n\n- Before executing any tasks, ALWAYS ensure you have read the specs requirements.md, design.md and tasks.md files. Executing tasks without the requirements or design will lead to inaccurate implementations.\n- Look at the task details in the task list\n- If the requested task has sub-tasks, always start with the sub tasks\n- Only focus on ONE task at a time. Do not implement functionality for other tasks.\n- Verify your implementation against any requirements specified in the task or its details.\n- Once you complete the requested task, stop and let the user review. DO NOT just proceed to the next task in the list\n- If the user doesn\'t specify which task they want to work on, look at the task list for that spec and make a recommendation\non the next task to execute.\n\nRemember, it is VERY IMPORTANT that you only execute one task at a time. Once you finish a task, stop. Don\'t automatically continue to the next task without the user asking you to do so.\n\n## Task Questions\n\nThe user may ask questions about tasks without wanting to execute them. Don\'t always start executing tasks in cases like this.\n\nFor example, the user may want to know what the next task is for a particular feature. In this case, just provide the information and don\'t start any tasks.\n\n# IMPORTANT EXECUTION INSTRUCTIONS\n\n- When you want the user to review a document in a phase, you MUST simply ask the user a direct question.\n- You MUST have the user review each of the 3 spec documents (requirements, design and tasks) before proceeding to the next.\n- After each document update or revision, you MUST:\n  1. Update the TodoWrite task list to reflect completion status\n  2. Explicitly ask the user to approve the document with a clear question\n- You MUST NOT proceed to the next phase until you receive explicit approval from the user (a clear "yes", "approved", or equivalent affirmative response).\n- If the user provides feedback, you MUST make the requested modifications and then explicitly ask for approval again.\n- You MUST continue this feedback-revision cycle until the user explicitly approves the document.\n- You MUST follow the workflow steps in sequential order.\n- You MUST NOT skip ahead to later steps without completing earlier ones and receiving explicit user approval.\n- You MUST treat each constraint in the workflow as a strict requirement.\n- You MUST NOT assume user preferences or requirements - always ask explicitly.\n- You MUST maintain a clear record of which step you are currently on.\n- You MUST NOT combine multiple steps into a single interaction.\n- You MUST ONLY execute one task at a time. Once it is complete, do not move to the next task automatically.\n  \n</system>\n\nUser Request: Create a requirements document for a new feature\n\nFeature Description: {{description}}\n\nWorkspace path: {{workspacePath}}\nSpec base path: {{specBasePath}}\n\nPlease:\n\n1. Choose an appropriate kebab-case name for this spec based on the description\n2. Create the directory structure: {{specBasePath}}/{your-chosen-name}/\n3. Create the requirements.md file in that directory\n4. Write the requirements document following the spec workflow in EARS format\n\nYou have full control over the naming and file creation.\n',t.default={frontmatter:t.frontmatter,content:t.content}},6563:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},i(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),o=0;o<n.length;o++)"default"!==n[o]&&r(t,e,n[o]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.OverviewProvider=void 0;const a=o(n(1398));t.OverviewProvider=class{context;_onDidChangeTreeData=new a.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;constructor(e){this.context=e}refresh(){this._onDidChangeTreeData.fire()}getTreeItem(e){return e}async getChildren(e){return[]}},a.TreeItem},6663:(e,t,n)=>{"use strict";var i=n(5388),r=Object.prototype.hasOwnProperty;e.exports=new i("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,n=e;for(t in n)if(r.call(n,t)&&null!==n[t])return!1;return!0},construct:function(e){return null!==e?e:{}}})},6727:(e,t,n)=>{"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(2871),s=i(n(3769)),o=n(2849),a=i(n(9632));function c(e){this.value=e}function l(){}l.prototype={nameLookup:function(e,t){return this.internalNameLookup(e,t)},depthedLookup:function(e){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(e),")"]},compilerInfo:function(){var e=r.COMPILER_REVISION;return[e,r.REVISION_CHANGES[e]]},appendToBuffer:function(e,t,n){return o.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:n?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(e,t){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",e,",",JSON.stringify(t),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(e,t,n,i){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!i,this.name=this.environment.name,this.isChild=!!n,this.context=n||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||e.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var r=e.opcodes,o=void 0,a=void 0,c=void 0,l=void 0;for(c=0,l=r.length;c<l;c++)o=r[c],this.source.currentLocation=o.loc,a=a||o.loc,this[o.opcode].apply(this,o.args);if(this.source.currentLocation=a,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new s.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),this.decorators.push("return fn;"),i?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var u=this.createFunctionContext(i);if(this.isChild)return u;var p={compiler:this.compilerInfo(),main:u};this.decorators&&(p.main_d=this.decorators,p.useDecorators=!0);var h=this.context,d=h.programs,f=h.decorators;for(c=0,l=d.length;c<l;c++)d[c]&&(p[c]=d[c],f[c]&&(p[c+"_d"]=f[c],p.useDecorators=!0));return this.environment.usePartial&&(p.usePartial=!0),this.options.data&&(p.useData=!0),this.useDepths&&(p.useDepths=!0),this.useBlockParams&&(p.useBlockParams=!0),this.options.compat&&(p.compat=!0),i?p.compilerOptions=this.options:(p.compiler=JSON.stringify(p.compiler),this.source.currentLocation={start:{line:1,column:0}},p=this.objectLiteral(p),t.srcName?(p=p.toStringWithSourceMap({file:t.destName})).map=p.map&&p.map.toString():p=p.toString()),p},preamble:function(){this.lastContext=0,this.source=new a.default(this.options.srcName),this.decorators=new a.default(this.options.srcName)},createFunctionContext:function(e){var t=this,n="",i=this.stackVars.concat(this.registers.list);i.length>0&&(n+=", "+i.join(", "));var r=0;Object.keys(this.aliases).forEach(function(e){var i=t.aliases[e];i.children&&i.referenceCount>1&&(n+=", alias"+ ++r+"="+e,i.children[0]="alias"+r)}),this.lookupPropertyFunctionIsUsed&&(n+=", "+this.lookupPropertyFunctionVarDeclaration());var s=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&s.push("blockParams"),this.useDepths&&s.push("depths");var o=this.mergeSource(n);return e?(s.push(o),Function.apply(this,s)):this.source.wrap(["function(",s.join(","),") {\n  ",o,"}"])},mergeSource:function(e){var t=this.environment.isSimple,n=!this.forceBuffer,i=void 0,r=void 0,s=void 0,o=void 0;return this.source.each(function(e){e.appendToBuffer?(s?e.prepend("  + "):s=e,o=e):(s&&(r?s.prepend("buffer += "):i=!0,o.add(";"),s=o=void 0),r=!0,t||(n=!1))}),n?s?(s.prepend("return "),o.add(";")):r||this.source.push('return "";'):(e+=", buffer = "+(i?"":this.initializeBuffer()),s?(s.prepend("return buffer + "),o.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(i?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(e){var t=this.aliasable("container.hooks.blockHelperMissing"),n=[this.contextName(0)];this.setupHelperArgs(e,0,n);var i=this.popStack();n.splice(1,0,i),this.push(this.source.functionCall(t,"call",n))},ambiguousBlockValue:function(){var e=this.aliasable("container.hooks.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var n=this.topStack();t.splice(1,0,n),this.pushSource(["if (!",this.lastHelper,") { ",n," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack(function(e){return[" != null ? ",e,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,n,i){var r=0;i||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[r++])),this.resolvePath("context",e,r,t,n)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t,n){e?this.pushStackLiteral("container.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",t,0,!0,n)},resolvePath:function(e,t,n,i,r){var s=this;if(this.options.strict||this.options.assumeObjects)this.push(function(e,t,n,i,r){var s=t.popStack(),o=n.length;for(e&&o--;i<o;i++)s=t.nameLookup(s,n[i],r);return e?[t.aliasable("container.strict"),"(",s,", ",t.quotedString(n[i]),", ",JSON.stringify(t.source.currentLocation)," )"]:s}(this.options.strict&&r,this,t,n,e));else for(var o=t.length;n<o;n++)this.replaceStack(function(r){var o=s.nameLookup(r,t[n],e);return i?[" && ",o]:[" != null ? ",o," : ",r]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},registerDecorator:function(e,t){var n=this.nameLookup("decorators",t,"decorator"),i=this.setupHelperArgs(t,e);this.decorators.push(["fn = ",this.decorators.functionCall(n,"",["fn","props","container",i])," || fn;"])},invokeHelper:function(e,t,n){var i=this.popStack(),r=this.setupHelper(e,t),s=[];n&&s.push(r.name),s.push(i),this.options.strict||s.push(this.aliasable("container.hooks.helperMissing"));var o=["(",this.itemsSeparatedBy(s,"||"),")"],a=this.source.functionCall(o,"call",r.callParams);this.push(a)},itemsSeparatedBy:function(e,t){var n=[];n.push(e[0]);for(var i=1;i<e.length;i++)n.push(t,e[i]);return n},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(this.source.functionCall(n.name,"call",n.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var n=this.popStack();this.emptyHash();var i=this.setupHelper(0,e,t),r=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",e,"helper")," || ",n,")"];this.options.strict||(r[0]="(helper = ",r.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",r,i.paramsInit?["),(",i.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",i.callParams)," : helper))"])},invokePartial:function(e,t,n){var i=[],r=this.setupParams(t,1,i);e&&(t=this.popStack(),delete r.name),n&&(r.indent=JSON.stringify(n)),r.helpers="helpers",r.partials="partials",r.decorators="container.decorators",e?i.unshift(t):i.unshift(this.nameLookup("partials",t,"partial")),this.options.compat&&(r.depths="depths"),r=this.objectLiteral(r),i.push(r),this.push(this.source.functionCall("container.invokePartial","",i))},assignToHash:function(e){var t=this.popStack(),n=void 0,i=void 0,r=void 0;this.trackIds&&(r=this.popStack()),this.stringParams&&(i=this.popStack(),n=this.popStack());var s=this.hash;n&&(s.contexts[e]=n),i&&(s.types[e]=i),r&&(s.ids[e]=r),s.values[e]=t},pushId:function(e,t,n){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(n?" + "+JSON.stringify("."+n):"")):"PathExpression"===e?this.pushString(t):"SubExpression"===e?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:l,compileChildren:function(e,t){for(var n=e.children,i=void 0,r=void 0,s=0,o=n.length;s<o;s++){i=n[s],r=new this.compiler;var a=this.matchExistingProgram(i);if(null==a){this.context.programs.push("");var c=this.context.programs.length;i.index=c,i.name="program"+c,this.context.programs[c]=r.compile(i,t,this.context,!this.precompile),this.context.decorators[c]=r.decorators,this.context.environments[c]=i,this.useDepths=this.useDepths||r.useDepths,this.useBlockParams=this.useBlockParams||r.useBlockParams,i.useDepths=this.useDepths,i.useBlockParams=this.useBlockParams}else i.index=a.index,i.name="program"+a.index,this.useDepths=this.useDepths||a.useDepths,this.useBlockParams=this.useBlockParams||a.useBlockParams}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var i=this.context.environments[t];if(i&&i.equals(e))return i}},programExpression:function(e){var t=this.environment.children[e],n=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&n.push("blockParams"),this.useDepths&&n.push("depths"),"container.program("+n.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof c||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new c(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],n=void 0,i=void 0,r=void 0;if(!this.isInline())throw new s.default("replaceStack on non-inline");var o=this.popStack(!0);if(o instanceof c)t=["(",n=[o.value]],r=!0;else{i=!0;var a=this.incrStack();t=["((",this.push(a)," = ",o,")"],n=this.topStack()}var l=e.call(this,n);r||this.popStack(),i&&this.stackSlot--,this.push(t.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,n=e.length;t<n;t++){var i=e[t];if(i instanceof c)this.compileStack.push(i);else{var r=this.incrStack();this.pushSource([r," = ",i,";"]),this.compileStack.push(r)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();if(!e&&n instanceof c)return n.value;if(!t){if(!this.stackSlot)throw new s.default("Invalid stack pop");this.stackSlot--}return n},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof c?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?(t.referenceCount++,t):((t=this.aliases[e]=this.source.wrap(e)).aliasable=!0,t.referenceCount=1,t)},setupHelper:function(e,t,n){var i=[];return{params:i,paramsInit:this.setupHelperArgs(t,e,i,n),name:this.nameLookup("helpers",t,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(i)}},setupParams:function(e,t,n){var i={},r=[],s=[],o=[],a=!n,c=void 0;a&&(n=[]),i.name=this.quotedString(e),i.hash=this.popStack(),this.trackIds&&(i.hashIds=this.popStack()),this.stringParams&&(i.hashTypes=this.popStack(),i.hashContexts=this.popStack());var l=this.popStack(),u=this.popStack();(u||l)&&(i.fn=u||"container.noop",i.inverse=l||"container.noop");for(var p=t;p--;)c=this.popStack(),n[p]=c,this.trackIds&&(o[p]=this.popStack()),this.stringParams&&(s[p]=this.popStack(),r[p]=this.popStack());return a&&(i.args=this.source.generateArray(n)),this.trackIds&&(i.ids=this.source.generateArray(o)),this.stringParams&&(i.types=this.source.generateArray(s),i.contexts=this.source.generateArray(r)),this.options.data&&(i.data="data"),this.useBlockParams&&(i.blockParams="blockParams"),i},setupHelperArgs:function(e,t,n,i){var r=this.setupParams(e,t,n);return r.loc=JSON.stringify(this.source.currentLocation),r=this.objectLiteral(r),i?(this.useRegister("options"),n.push("options"),["options=",r]):n?(n.push(r),""):r}},function(){for(var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),t=l.RESERVED_WORDS={},n=0,i=e.length;n<i;n++)t[e[n]]=!0}(),l.isValidJavaScriptVariableName=function(e){return!l.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},t.default=l,e.exports=t.default},6785:(e,t,n)=>{"use strict";t.__esModule=!0;var i,r=n(2849),s=(i=n(3769))&&i.__esModule?i:{default:i};t.default=function(e){e.registerHelper("each",function(e,t){if(!t)throw new s.default("Must pass iterator to #each");var n,i=t.fn,o=t.inverse,a=0,c="",l=void 0,u=void 0;function p(t,n,s){l&&(l.key=t,l.index=n,l.first=0===n,l.last=!!s,u&&(l.contextPath=u+t)),c+=i(e[t],{data:l,blockParams:r.blockParams([e[t],t],[u+t,null])})}if(t.data&&t.ids&&(u=r.appendContextPath(t.data.contextPath,t.ids[0])+"."),r.isFunction(e)&&(e=e.call(this)),t.data&&(l=r.createFrame(t.data)),e&&"object"==typeof e)if(r.isArray(e))for(var h=e.length;a<h;a++)a in e&&p(a,a,a===e.length-1);else if("function"==typeof Symbol&&e[Symbol.iterator]){for(var d=[],f=e[Symbol.iterator](),m=f.next();!m.done;m=f.next())d.push(m.value);for(h=(e=d).length;a<h;a++)p(a,a,a===e.length-1)}else n=void 0,Object.keys(e).forEach(function(e){void 0!==n&&p(n,a-1),n=e,a++}),void 0!==n&&p(n,a-1,!0);return 0===a&&(c=o(this)),c})},e.exports=t.default},6807:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},i(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),o=0;o<n.length;o++)"default"!==n[o]&&r(t,e,n[o]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigManager=void 0;const a=o(n(1398)),c=o(n(6928)),l=n(6921);class u{static instance;settings=null;workspaceFolder;static TERMINAL_VENV_ACTIVATION_DELAY=800;constructor(){this.workspaceFolder=a.workspace.workspaceFolders?.[0]}static getInstance(){return u.instance||(u.instance=new u),u.instance}async loadSettings(){if(!this.workspaceFolder)return this.getDefaultSettings();const e=c.join(this.workspaceFolder.uri.fsPath,l.DEFAULT_PATHS.settings,l.CONFIG_FILE_NAME);try{const t=await a.workspace.fs.readFile(a.Uri.file(e)),n=JSON.parse(Buffer.from(t).toString()),i={...this.getDefaultSettings(),...n};return this.settings=i,this.settings}catch(e){return this.settings=this.getDefaultSettings(),this.settings}}getSettings(){return this.settings||(this.settings=this.getDefaultSettings()),this.settings}getPath(e){const t=this.getSettings().paths[e]||l.DEFAULT_PATHS[e];return this.normalizePath(t)||this.normalizePath(l.DEFAULT_PATHS[e])}normalizePath(e){if(!e)return e;let t=e.trim().replace(/^(\.\/|\.\\)+/,"");return t=t.replace(/\\/g,"/"),t=t.replace(/\/{2,}/g,"/"),t=t.replace(/\/+$/,""),t}getAbsolutePath(e){if(!this.workspaceFolder)throw new Error("No workspace folder found");return c.join(this.workspaceFolder.uri.fsPath,this.getPath(e))}getTerminalDelay(){return u.TERMINAL_VENV_ACTIVATION_DELAY}getClaudeInvocationMode(){return this.settings?.claude?.invocationMode||"cli"}getClaudeCLIPath(){return this.settings?.claude?.cliPath||"claude"}getDefaultSettings(){return{paths:{...l.DEFAULT_PATHS},views:{specs:{visible:l.DEFAULT_VIEW_VISIBILITY.specs},steering:{visible:l.DEFAULT_VIEW_VISIBILITY.steering},mcp:{visible:l.DEFAULT_VIEW_VISIBILITY.mcp},hooks:{visible:l.DEFAULT_VIEW_VISIBILITY.hooks},settings:{visible:l.DEFAULT_VIEW_VISIBILITY.settings}},claude:{invocationMode:"cli",cliPath:"claude"}}}async saveSettings(e){if(!this.workspaceFolder)throw new Error("No workspace folder found");const t=c.join(this.workspaceFolder.uri.fsPath,l.DEFAULT_PATHS.settings),n=c.join(t,l.CONFIG_FILE_NAME);await a.workspace.fs.createDirectory(a.Uri.file(t)),await a.workspace.fs.writeFile(a.Uri.file(n),Buffer.from(JSON.stringify(e,null,2))),this.settings=e}}t.ConfigManager=u},6921:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_VIEW_VISIBILITY=t.DEFAULT_PATHS=t.DEFAULT_CONFIG=t.CONFIG_FILE_NAME=t.VSC_CONFIG_NAMESPACE=void 0,t.getDefaultConfig=r;const i=n(9010);function r(){const e=(0,i.getVSCodeLanguage)(),t=(0,i.getDirectoryNames)(e);return{paths:{specs:`.claude/${t.specs}`,steering:`.claude/${t.steering}`,settings:`.claude/${t.settings}`},views:{specs:!0,steering:!0,mcp:!0,hooks:!0,settings:!1},claude:{invocationMode:"cli",cliPath:"claude"}}}t.VSC_CONFIG_NAMESPACE="prisma",t.CONFIG_FILE_NAME="prisma.settings.json",t.DEFAULT_CONFIG=r(),t.DEFAULT_PATHS=t.DEFAULT_CONFIG.paths,t.DEFAULT_VIEW_VISIBILITY=t.DEFAULT_CONFIG.views},6928:e=>{"use strict";e.exports=require("path")},6942:(e,t,n)=>{"use strict";var i=n(5388),r=Object.prototype.toString;e.exports=new i("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,i,s,o,a=e;for(o=new Array(a.length),t=0,n=a.length;t<n;t+=1){if(i=a[t],"[object Object]"!==r.call(i))return!1;if(1!==(s=Object.keys(i)).length)return!1;o[t]=[s[0],i[s[0]]]}return!0},construct:function(e){if(null===e)return[];var t,n,i,r,s,o=e;for(s=new Array(o.length),t=0,n=o.length;t<n;t+=1)i=o[t],r=Object.keys(i),s[t]=[r[0],i[r[0]]];return s}})},6946:(e,t,n)=>{"use strict";var i=n(5388),r=Object.prototype.hasOwnProperty,s=Object.prototype.toString;e.exports=new i("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,i,o,a,c=[],l=e;for(t=0,n=l.length;t<n;t+=1){if(i=l[t],a=!1,"[object Object]"!==s.call(i))return!1;for(o in i)if(r.call(i,o)){if(a)return!1;a=!0}if(!a)return!1;if(-1!==c.indexOf(o))return!1;c.push(o)}return!0},construct:function(e){return null!==e?e:[]}})},7210:(e,t,n)=>{"use strict";var i=n(9243),r=n(4781);function s(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}e.exports.Type=n(5388),e.exports.Schema=n(2119),e.exports.FAILSAFE_SCHEMA=n(7759),e.exports.JSON_SCHEMA=n(6184),e.exports.CORE_SCHEMA=n(1769),e.exports.DEFAULT_SCHEMA=n(5489),e.exports.load=i.load,e.exports.loadAll=i.loadAll,e.exports.dump=r.dump,e.exports.YAMLException=n(1231),e.exports.types={binary:n(9342),float:n(1461),map:n(2369),null:n(9198),pairs:n(6942),set:n(6663),timestamp:n(127),bool:n(6199),int:n(4466),merge:n(1851),omap:n(6946),seq:n(8636),str:n(7212)},e.exports.safeLoad=s("safeLoad","load"),e.exports.safeLoadAll=s("safeLoadAll","loadAll"),e.exports.safeDump=s("safeDump","dump")},7212:(e,t,n)=>{"use strict";var i=n(5388);e.exports=new i("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}})},7300:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.content=t.frontmatter=void 0,t.frontmatter={id:"create-custom-steering",name:"Create Custom Steering Document",version:"1.0.0",description:"Complete prompt for creating a custom steering document",variables:{description:{type:"string",required:!0,description:"User's guidance needs description"},steeringPath:{type:"string",required:!0,description:"Path where steering documents should be created"}}},t.content='\n<system>\nYou are helping to create steering documents for a project. Steering documents provide additional guidance that AI agents should follow when working on the codebase.\n\nIMPORTANT: The content you generate will be wrapped in the following format when provided to AI agents:\n"I am providing you some additional guidance that you should follow for your entire execution. These are intended to steer you in the right direction. You should follow these instructions for all following responses."\n\nTherefore, write the steering document content directly as instructions/rules, without any preamble or meta-commentary about what steering documents are.\n\nSteering document content should:\n\n- Be written as direct instructions to the AI agent\n- Focus on project-specific conventions, patterns, and rules\n- Be concise and actionable\n- Include specific examples from this codebase when relevant\n- Avoid generic advice that would apply to any project\n</system>\n\n# Create Custom Steering Document\n\nBased on this guidance need: "{{description}}"\n\nPlease:\n\n1. Choose an appropriate kebab-case filename for this steering document\n2. Create the document in the {{steeringPath}} directory\n3. Write comprehensive guidance that addresses the specific needs mentioned\n4. If a project CLAUDE.md exists, add or update the "## Steering Documents" section to include this new document with its description and path\n',t.default={frontmatter:t.frontmatter,content:t.content}},7341:(e,t,n)=>{var i=n(639).default,r=n(9016);i.PrintVisitor=r.PrintVisitor,i.print=r.print,e.exports=i},7402:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},i(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),o=0;o<n.length;o++)"default"!==n[o]&&r(t,e,n[o]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationUtils=void 0;const a=o(n(1398));t.NotificationUtils=class{static async showAutoDismissNotification(e,t=3e3){await a.window.withProgress({location:a.ProgressLocation.Notification,title:e,cancellable:!1},async()=>{await new Promise(e=>setTimeout(e,t))})}static showError(e){a.window.showErrorMessage(e)}static showWarning(e){a.window.showWarningMessage(e)}static showInfo(e){a.window.showInformationMessage(e)}}},7430:(e,t,n)=>{"use strict";t.__esModule=!0;var i=n(2849);t.default=function(e){e.registerDecorator("inline",function(e,t,n,r){var s=e;return t.partials||(t.partials={},s=function(r,s){var o=n.partials;n.partials=i.extend({},o,t.partials);var a=e(r,s);return n.partials=o,a}),t.partials[r.args[0]]=r.fn,s})},e.exports=t.default},7466:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",function(e,t,n){return e?n.lookupProperty(e,t):e})},e.exports=t.default},7591:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},i(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),o=0;o<n.length;o++)"default"!==n[o]&&r(t,e,n[o]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.ClaudeCodeProvider=void 0;const a=o(n(1398)),c=o(n(9896)),l=o(n(6928)),u=n(6807),p=n(6921),h=n(4265);t.ClaudeCodeProvider=class{context;outputChannel;configManager;constructor(e,t){this.context=e,this.outputChannel=t,this.configManager=u.ConfigManager.getInstance(),this.configManager.loadSettings(),a.workspace.onDidChangeConfiguration(e=>{e.affectsConfiguration(p.VSC_CONFIG_NAMESPACE)&&this.configManager.loadSettings()})}async createTempFile(e,t="prompt"){const n=this.context.globalStorageUri.fsPath;await a.workspace.fs.createDirectory(this.context.globalStorageUri);const i=l.join(n,`${t}-${Date.now()}.md`);return await c.promises.writeFile(i,e),this.convertPathIfWSL(i)}convertPathIfWSL(e){if("win32"===process.platform&&e.match(/^[A-Za-z]:\\/)){let t=e.replace(/\\/g,"/");return t=t.replace(/^([A-Za-z]):/,(e,t)=>`/mnt/${t.toLowerCase()}`),t}return e}async invokeClaudeSplitView(e,t="Prisma for Claude Code"){try{const n=(0,h.getPermissionManager)();if(n&&!await n.checkPermission()&&(this.outputChannel.appendLine("[ClaudeCodeProvider] No permission, showing setup"),!await n.showPermissionSetup()))throw new Error("Claude Code permissions not granted");const i=await this.createTempFile(e,"prompt");let r=`${this.configManager.getClaudeCLIPath()} --permission-mode bypassPermissions "$(cat "${i}")"`;const s=a.window.createTerminal({name:t,cwd:a.workspace.workspaceFolders?.[0]?.uri.fsPath,location:{viewColumn:a.ViewColumn.Two}});s.show();const o=this.configManager.getTerminalDelay();return setTimeout(()=>{s.sendText(r,!0)},o),setTimeout(async()=>{try{await c.promises.unlink(i),this.outputChannel.appendLine(`Cleaned up prompt file: ${i}`)}catch(e){this.outputChannel.appendLine(`Failed to cleanup temp file: ${e}`)}},3e4),s}catch(e){throw this.outputChannel.appendLine(`ERROR: Failed to send to Claude Code: ${e}`),a.window.showErrorMessage(`Failed to run Claude Code: ${e}`),e}}async renameTerminal(e,t){e.show(),await new Promise(e=>setTimeout(e,100)),this.outputChannel.appendLine(`[ClaudeCodeProvider] ${e.name} Terminal renamed to: ${t}`),await a.commands.executeCommand("workbench.action.terminal.renameWithArg",{name:t})}async invokeClaudeHeadless(e){const t=(0,h.getPermissionManager)();if(t&&!await t.checkPermission()&&(this.outputChannel.appendLine("[ClaudeCodeProvider] No permission, showing setup"),!await t.showPermissionSetup()))throw new Error("Claude Code permissions not granted");this.outputChannel.appendLine("[ClaudeCodeProvider] Invoking Claude Code in headless mode"),this.outputChannel.appendLine("========================================"),this.outputChannel.appendLine(e),this.outputChannel.appendLine("========================================");const n=a.workspace.workspaceFolders?.[0],i=n?.uri.fsPath,r=await this.createTempFile(e,"background-prompt");let s=`${this.configManager.getClaudeCLIPath()} --permission-mode bypassPermissions "$(cat "${r}")"`;const o=a.window.createTerminal({name:"Claude Code Background",cwd:i,hideFromUser:!0});return new Promise(e=>{let t=0;const n=setInterval(()=>{if(t++,o.shellIntegration){clearInterval(n);const t=o.shellIntegration.executeCommand(s),i=a.window.onDidEndTerminalShellExecution(n=>{n.terminal===o&&n.execution===t&&(i.dispose(),0!==n.exitCode&&(this.outputChannel.appendLine(`[Claude] Command failed with exit code: ${n.exitCode}`),this.outputChannel.appendLine(`[Claude] Command was: ${s}`)),e({exitCode:n.exitCode,output:void 0}),setTimeout(async()=>{o.dispose();try{await c.promises.unlink(r),this.outputChannel.appendLine(`[Claude] Cleaned up temp file: ${r}`)}catch(e){this.outputChannel.appendLine(`[Claude] Failed to cleanup temp file: ${e}`)}},1e3))})}else t>20&&(clearInterval(n),this.outputChannel.appendLine("[Claude] Shell integration not available, using fallback mode"),o.sendText(s),setTimeout(async()=>{e({exitCode:void 0}),o.dispose();try{await c.promises.unlink(r)}catch(e){}},5e3))},100)})}static createPermissionTerminal(){const e=a.workspace.workspaceFolders?.[0]?.uri.fsPath,t=a.window.createTerminal({name:"Claude Code - Permission Setup",cwd:e,location:{viewColumn:a.ViewColumn.Two}});return t.show(),t.sendText("claude --permission-mode bypassPermissions",!0),t}}},7624:(e,t,n)=>{"use strict";t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,n=o.COMPILER_REVISION;if(!(t>=o.LAST_COMPATIBLE_COMPILER_REVISION&&t<=o.COMPILER_REVISION)){if(t<o.LAST_COMPATIBLE_COMPILER_REVISION){var i=o.REVISION_CHANGES[n],r=o.REVISION_CHANGES[t];throw new s.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new s.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}},t.template=function(e,t){if(!t)throw new s.default("No environment passed to template");if(!e||!e.main)throw new s.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var n=e.compiler&&7===e.compiler[0],i={strict:function(e,t,n){if(!e||!(t in e))throw new s.default('"'+t+'" not defined in '+e,{loc:n});return i.lookupProperty(e,t)},lookupProperty:function(e,t){var n=e[t];return null==n||Object.prototype.hasOwnProperty.call(e,t)||l.resultIsAllowed(n,i.protoAccessControl,t)?n:void 0},lookup:function(e,t){for(var n=e.length,r=0;r<n;r++)if(null!=(e[r]&&i.lookupProperty(e[r],t)))return e[r][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:r.escapeExpression,invokePartial:function(n,i,o){o.hash&&(i=r.extend({},i,o.hash),o.ids&&(o.ids[0]=!0)),n=t.VM.resolvePartial.call(this,n,i,o);var a=r.extend({},o,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),c=t.VM.invokePartial.call(this,n,i,a);if(null==c&&t.compile&&(o.partials[o.name]=t.compile(n,e.compilerOptions,t),c=o.partials[o.name](i,a)),null!=c){if(o.indent){for(var l=c.split("\n"),u=0,p=l.length;u<p&&(l[u]||u+1!==p);u++)l[u]=o.indent+l[u];c=l.join("\n")}return c}throw new s.default("The partial "+o.name+" could not be compiled when running in runtime-only mode")},fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,i,r){var s=this.programs[e],o=this.fn(e);return t||r||i||n?s=u(this,e,o,t,n,i,r):s||(s=this.programs[e]=u(this,e,o)),s},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=r.extend({},t,e)),n},nullContext:Object.seal({}),noop:t.VM.noop,compilerInfo:e.compiler};function p(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=n.data;p._setup(n),!n.partial&&e.useData&&(r=function(e,t){return t&&"root"in t||((t=t?o.createFrame(t):{}).root=e),t}(t,r));var s=void 0,a=e.useBlockParams?[]:void 0;function c(t){return""+e.main(i,t,i.helpers,i.partials,r,a,s)}return e.useDepths&&(s=n.depths?t!=n.depths[0]?[t].concat(n.depths):n.depths:[t]),(c=h(e.main,c,i,n.depths||[],r,a))(t,n)}return p.isTop=!0,p._setup=function(s){if(s.partial)i.protoAccessControl=s.protoAccessControl,i.helpers=s.helpers,i.partials=s.partials,i.decorators=s.decorators,i.hooks=s.hooks;else{var o=r.extend({},t.helpers,s.helpers);!function(e,t){Object.keys(e).forEach(function(n){var i=e[n];e[n]=function(e,t){var n=t.lookupProperty;return c.wrapHelper(e,function(e){return r.extend({lookupProperty:n},e)})}(i,t)})}(o,i),i.helpers=o,e.usePartial&&(i.partials=i.mergeIfNeeded(s.partials,t.partials)),(e.usePartial||e.useDecorators)&&(i.decorators=r.extend({},t.decorators,s.decorators)),i.hooks={},i.protoAccessControl=l.createProtoAccessControl(s);var u=s.allowCallsToHelperMissing||n;a.moveHelperToHooks(i,"helperMissing",u),a.moveHelperToHooks(i,"blockHelperMissing",u)}},p._child=function(t,n,r,o){if(e.useBlockParams&&!r)throw new s.default("must pass block params");if(e.useDepths&&!o)throw new s.default("must pass parent depths");return u(i,t,e[t],n,0,r,o)},p},t.wrapProgram=u,t.resolvePartial=function(e,t,n){return e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name],e},t.invokePartial=function(e,t,n){var i=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var a=void 0;if(n.fn&&n.fn!==p&&function(){n.data=o.createFrame(n.data);var e=n.fn;a=n.data["partial-block"]=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=o.createFrame(n.data),n.data["partial-block"]=i,e(t,n)},e.partials&&(n.partials=r.extend({},n.partials,e.partials))}(),void 0===e&&a&&(e=a),void 0===e)throw new s.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)},t.noop=p;var i,r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2849)),s=(i=n(3769))&&i.__esModule?i:{default:i},o=n(2871),a=n(2277),c=n(2614),l=n(3865);function u(e,t,n,i,r,s,o){function a(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=o;return!o||t==o[0]||t===e.nullContext&&null===o[0]||(a=[t].concat(o)),n(e,t,e.helpers,e.partials,r.data||i,s&&[r.blockParams].concat(s),a)}return(a=h(n,a,e,o,i,s)).program=t,a.depth=o?o.length:0,a.blockParams=r||0,a}function p(){return""}function h(e,t,n,i,s,o){if(e.decorator){var a={};t=e.decorator(t,a,n,i&&i[0],s,o,i),r.extend(t,a)}return t}},7759:(e,t,n)=>{"use strict";var i=n(2119);e.exports=new i({explicit:[n(7212),n(8636),n(2369)]})},7775:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},i(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),o=0;o<n.length;o++)"default"!==n[o]&&r(t,e,n[o]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.SpecTaskCodeLensProvider=void 0;const a=o(n(1398)),c=n(6807);t.SpecTaskCodeLensProvider=class{_onDidChangeCodeLenses=new a.EventEmitter;onDidChangeCodeLenses=this._onDidChangeCodeLenses.event;configManager;constructor(){this.configManager=c.ConfigManager.getInstance(),this.configManager.loadSettings(),a.workspace.onDidChangeConfiguration(e=>{this._onDidChangeCodeLenses.fire()})}provideCodeLenses(e,t){const n=this.configManager.getPath("specs").replace(/\\/g,"/"),i=e.fileName.replace(/\\/g,"/"),r=`/${n}/`;if(!i.includes(r)||!i.endsWith("tasks.md"))return[];const s=[],o=e.getText().split(/\r?\n/);for(let t=0;t<o.length;t++){const n=o[t],i=n.match(/^(\s*)- \[ \] (.+)$/);if(i){const r=new a.Range(t,0,t,n.length),o=i[2],c=new a.CodeLens(r,{title:"▶ Start Task",tooltip:"Click to implement this task with Claude Code",command:"prisma.spec.implTask",arguments:[e.uri,t,o]});s.push(c)}}return s}resolveCodeLens(e,t){return e}}},7825:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},i(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),o=0;o<n.length;o++)"default"!==n[o]&&r(t,e,n[o]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.AgentsExplorerProvider=void 0;const a=o(n(1398)),c=o(n(6928)),l=n(2713);t.AgentsExplorerProvider=class{context;agentManager;outputChannel;_onDidChangeTreeData=new a.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;fileWatcher;userFileWatcher;isLoading=!1;constructor(e,t,n){this.context=e,this.agentManager=t,this.outputChannel=n,this.setupFileWatchers()}refresh(){this.isLoading=!0,this._onDidChangeTreeData.fire(),setTimeout(()=>{this.isLoading=!1,this._onDidChangeTreeData.fire()},100)}getTreeItem(e){return e}async getChildren(e){if(!a.workspace.workspaceFolders)return[];if(!e){const e=[];return this.isLoading?(e.push(new u((0,l.getTranslations)().agents.loadingAgents,a.TreeItemCollapsibleState.None,"agent-loading")),e):(e.push(new u((0,l.getTranslations)().agents.userAgents,a.TreeItemCollapsibleState.Expanded,"agent-group","user")),((await this.agentManager.getAgentList("project")).length>0||a.workspace.workspaceFolders)&&e.push(new u((0,l.getTranslations)().agents.projectAgents,a.TreeItemCollapsibleState.Expanded,"agent-group","project")),e)}return"agent-group"===e.contextValue?(await this.agentManager.getAgentList(e.groupType)).map(e=>new u(e.name,a.TreeItemCollapsibleState.None,"agent",void 0,e)):[]}setupFileWatchers(){const e=a.workspace.workspaceFolders?.[0];if(e){const t=new a.RelativePattern(e,".claude/agents/**/*.md");this.fileWatcher=a.workspace.createFileSystemWatcher(t),this.fileWatcher.onDidCreate(()=>this._onDidChangeTreeData.fire()),this.fileWatcher.onDidChange(()=>this._onDidChangeTreeData.fire()),this.fileWatcher.onDidDelete(()=>this._onDidChangeTreeData.fire())}const t=c.join(n(857).homedir(),".claude/agents"),i=new a.RelativePattern(t,"**/*.md");try{this.userFileWatcher=a.workspace.createFileSystemWatcher(i),this.userFileWatcher.onDidCreate(()=>this._onDidChangeTreeData.fire()),this.userFileWatcher.onDidChange(()=>this._onDidChangeTreeData.fire()),this.userFileWatcher.onDidDelete(()=>this._onDidChangeTreeData.fire())}catch(e){this.outputChannel.appendLine(`[AgentsExplorer] Failed to watch user agents directory: ${e}`)}}dispose(){this.fileWatcher?.dispose(),this.userFileWatcher?.dispose()}};class u extends a.TreeItem{label;collapsibleState;contextValue;groupType;agentInfo;constructor(e,t,n,i,r){super(e,t),this.label=e,this.collapsibleState=t,this.contextValue=n,this.groupType=i,this.agentInfo=r,"agent-loading"===n?(this.iconPath=new a.ThemeIcon("sync~spin"),this.tooltip=(0,l.getTranslations)().agents.loadingAgents):"agent-group"===n?"user"===i?(this.iconPath=new a.ThemeIcon("globe"),this.tooltip=(0,l.getTranslations)().agents.userAgentsTooltip):(this.iconPath=new a.ThemeIcon("root-folder"),this.tooltip=(0,l.getTranslations)().agents.projectAgentsTooltip):"agent"===n&&r&&(this.iconPath=new a.ThemeIcon("robot"),this.tooltip=r.description||r.name,this.description=r.tools?`Tools: ${r.tools.length}`:void 0,this.command={command:"vscode.open",title:"Open Agent",arguments:[a.Uri.file(r.path)]})}}},8083:(e,t,n)=>{"use strict";var i=n(8433);function r(e,t,n,i,r){var s="",o="",a=Math.floor(r/2)-1;return i-t>a&&(t=i-a+(s=" ... ").length),n-i>a&&(n=i+a-(o=" ...").length),{str:s+e.slice(t,n).replace(/\t/g,"→")+o,pos:i-t+s.length}}function s(e,t){return i.repeat(" ",t-e.length)+e}e.exports=function(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),"number"!=typeof t.indent&&(t.indent=1),"number"!=typeof t.linesBefore&&(t.linesBefore=3),"number"!=typeof t.linesAfter&&(t.linesAfter=2);for(var n,o=/\r?\n|\r|\0/g,a=[0],c=[],l=-1;n=o.exec(e.buffer);)c.push(n.index),a.push(n.index+n[0].length),e.position<=n.index&&l<0&&(l=a.length-2);l<0&&(l=a.length-1);var u,p,h="",d=Math.min(e.line+t.linesAfter,c.length).toString().length,f=t.maxLength-(t.indent+d+3);for(u=1;u<=t.linesBefore&&!(l-u<0);u++)p=r(e.buffer,a[l-u],c[l-u],e.position-(a[l]-a[l-u]),f),h=i.repeat(" ",t.indent)+s((e.line-u+1).toString(),d)+" | "+p.str+"\n"+h;for(p=r(e.buffer,a[l],c[l],e.position,f),h+=i.repeat(" ",t.indent)+s((e.line+1).toString(),d)+" | "+p.str+"\n",h+=i.repeat("-",t.indent+d+3+p.pos)+"^\n",u=1;u<=t.linesAfter&&!(l+u>=c.length);u++)p=r(e.buffer,a[l+u],c[l+u],e.position-(a[l]-a[l+u]),f),h+=i.repeat(" ",t.indent)+s((e.line+u+1).toString(),d)+" | "+p.str+"\n";return h.replace(/\n$/,"")}},8328:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},i(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),o=0;o<n.length;o++)"default"!==n[o]&&r(t,e,n[o]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.SpecExplorerProvider=void 0;const a=o(n(1398));t.SpecExplorerProvider=class{context;_onDidChangeTreeData=new a.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;specManager;outputChannel;isLoading=!1;constructor(e,t){this.context=e,this.outputChannel=t}setSpecManager(e){this.specManager=e}refresh(){this.isLoading=!0,this._onDidChangeTreeData.fire(),setTimeout(()=>{this.isLoading=!1,this._onDidChangeTreeData.fire()},100)}getTreeItem(e){return e}async getChildren(e){if(!a.workspace.workspaceFolders||!this.specManager)return[];if(!e){const e=[];return this.isLoading?(e.push(new c("Loading specs...",a.TreeItemCollapsibleState.None,"spec-loading",this.context)),e):(await this.specManager.getSpecList()).map(e=>new c(e,a.TreeItemCollapsibleState.Expanded,"spec",this.context,e))}if("spec"===e.contextValue){const t=`${await this.specManager.getSpecBasePath()}/${e.specName}`;return[new c("requirements",a.TreeItemCollapsibleState.None,"spec-document",this.context,e.specName,"requirements",{command:"prisma.spec.navigate.requirements",title:"Open Requirements",arguments:[e.specName]},`${t}/requirements.md`),new c("design",a.TreeItemCollapsibleState.None,"spec-document",this.context,e.specName,"design",{command:"prisma.spec.navigate.design",title:"Open Design",arguments:[e.specName]},`${t}/design.md`),new c("tasks",a.TreeItemCollapsibleState.None,"spec-document",this.context,e.specName,"tasks",{command:"prisma.spec.navigate.tasks",title:"Open Tasks",arguments:[e.specName]},`${t}/tasks.md`)]}return[]}};class c extends a.TreeItem{label;collapsibleState;contextValue;context;specName;documentType;command;filePath;constructor(e,t,n,i,r,s,o,c){super(e,t),this.label=e,this.collapsibleState=t,this.contextValue=n,this.context=i,this.specName=r,this.documentType=s,this.command=o,this.filePath=c,"spec-loading"===n?(this.iconPath=new a.ThemeIcon("sync~spin"),this.tooltip="Loading specs..."):"spec"===n?(this.iconPath=new a.ThemeIcon("package"),this.tooltip=`Spec: ${e}`):"spec-document"===n&&("requirements"===s?(this.iconPath=new a.ThemeIcon("chip"),this.tooltip=`Requirements: ${r}/${e}`):"design"===s?(this.iconPath=new a.ThemeIcon("layers"),this.tooltip=`Design: ${r}/${e}`):"tasks"===s?(this.iconPath=new a.ThemeIcon("tasklist"),this.tooltip=`Tasks: ${r}/${e}`):(this.iconPath=new a.ThemeIcon("file"),this.tooltip=`${s}: ${r}/${e}`),c&&(this.description=c),"requirements"!==s&&"design"!==s&&"tasks"!==s||(this.contextValue=`spec-document-${s}`))}}},8332:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.implTask=t.refineSteering=t.initSteering=t.deleteSteering=t.createCustomSteering=t.createSpecWithAgents=t.createSpec=void 0;var r=n(6306);Object.defineProperty(t,"createSpec",{enumerable:!0,get:function(){return i(r).default}});var s=n(1882);Object.defineProperty(t,"createSpecWithAgents",{enumerable:!0,get:function(){return i(s).default}});var o=n(7300);Object.defineProperty(t,"createCustomSteering",{enumerable:!0,get:function(){return i(o).default}});var a=n(9943);Object.defineProperty(t,"deleteSteering",{enumerable:!0,get:function(){return i(a).default}});var c=n(9508);Object.defineProperty(t,"initSteering",{enumerable:!0,get:function(){return i(c).default}});var l=n(409);Object.defineProperty(t,"refineSteering",{enumerable:!0,get:function(){return i(l).default}});var u=n(1610);Object.defineProperty(t,"implTask",{enumerable:!0,get:function(){return i(u).default}})},8338:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},i(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),o=0;o<n.length;o++)"default"!==n[o]&&r(t,e,n[o]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateChecker=void 0;const a=o(n(1398)),c=n(7402);class l{context;outputChannel;static SKIP_VERSION_KEY="prisma.skipVersion";static LAST_CHECK_KEY="prisma.lastUpdateCheck";static CHECK_INTERVAL=864e5;constructor(e,t){this.context=e,this.outputChannel=t}async checkForUpdates(e=!1){if(e||!this.hasCheckedRecently())try{const e=this.getCurrentVersion();if(!e)return void this.outputChannel.appendLine("[UpdateChecker] ERROR: Could not get current extension version");this.outputChannel.appendLine(`[UpdateChecker] Checking for updates... (current: ${e})`);const t=await this.fetchLatestRelease();if(!t)return;const n=t.tag_name.replace(/^v/,""),i=this.context.globalState.get(l.SKIP_VERSION_KEY);this.isNewerVersion(e,n)&&n!==i&&this.showUpdateNotification(e,n),await this.context.globalState.update(l.LAST_CHECK_KEY,Date.now()),this.outputChannel.appendLine("[UpdateChecker] Update check completed")}catch(e){this.outputChannel.appendLine(`[UpdateChecker] ERROR: Failed to check for updates: ${e}`)}}getCurrentVersion(){const e=a.extensions.getExtension("matheusmaiberg.prisma-for-cc");return e?.packageJSON.version}async fetchLatestRelease(){try{this.outputChannel.appendLine("[UpdateChecker] Fetching latest release from GitHub...");const e=await fetch("https://api.github.com/repos/matheusmaiberg/prisma/releases/latest");if(!e.ok)return this.outputChannel.appendLine(`[UpdateChecker] GitHub API returned ${e.status}: ${e.statusText}`),null;const t=await e.json();return this.outputChannel.appendLine(`[UpdateChecker] Latest release: ${t?.tag_name||"unknown"}`),t}catch(e){return this.outputChannel.appendLine(`[UpdateChecker] ERROR: Failed to fetch latest release: ${e}`),null}}showUpdateNotification(e,t){const n=`🎉 Prisma ${t} is available! (current: ${e})`;this.outputChannel.appendLine(`[UpdateChecker] Showing update notification: ${n}`),a.window.showInformationMessage(n,"View Changelog","Skip").then(async e=>{if("View Changelog"===e){const e="https://github.com/matheusmaiberg/prisma/releases/latest";await a.env.openExternal(a.Uri.parse(e))}else"Skip"===e&&(await this.context.globalState.update(l.SKIP_VERSION_KEY,t),await c.NotificationUtils.showAutoDismissNotification(`Version ${t} will be skipped in future checks.`,5e3))})}isNewerVersion(e,t){const n=e.split(".").map(Number),i=t.split(".").map(Number);for(let e=0;e<3;e++){const t=n[e]||0,r=i[e]||0;if(r>t)return!0;if(r<t)return!1}return!1}hasCheckedRecently(){const e=this.context.globalState.get(l.LAST_CHECK_KEY,0);return Date.now()-e<l.CHECK_INTERVAL}async clearSkipVersion(){await this.context.globalState.update(l.SKIP_VERSION_KEY,void 0)}}t.UpdateChecker=l},8394:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},i(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),o=0;o<n.length;o++)"default"!==n[o]&&r(t,e,n[o]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.SteeringManager=void 0;const a=o(n(1398)),c=o(n(6928)),l=n(6807),u=n(7402),p=n(8916);t.SteeringManager=class{claudeCodeProvider;outputChannel;configManager;promptLoader;constructor(e,t){this.claudeCodeProvider=e,this.outputChannel=t,this.configManager=l.ConfigManager.getInstance(),this.configManager.loadSettings(),this.promptLoader=p.PromptLoader.getInstance()}getSteeringBasePath(){return this.configManager.getPath("steering")}async createCustom(){const e=await a.window.showInputBox({title:"📝 Create Steering Document 📝",prompt:"Describe what guidance you need for your project",placeHolder:"e.g., API design patterns for REST endpoints, testing strategy for React components",ignoreFocusOut:!1});if(!e)return;const t=a.workspace.workspaceFolders?.[0];if(!t)return void a.window.showErrorMessage("No workspace folder open");const n=c.join(t.uri.fsPath,this.getSteeringBasePath());try{await a.workspace.fs.createDirectory(a.Uri.file(n));const t=this.promptLoader.renderPrompt("create-custom-steering",{description:e,steeringPath:this.getSteeringBasePath()});await this.claudeCodeProvider.invokeClaudeSplitView(t,"Prisma - Create Steering"),await u.NotificationUtils.showAutoDismissNotification("Claude is creating a steering document based on your needs. Check the terminal for progress.")}catch(e){a.window.showErrorMessage(`Failed to create steering document: ${e}`)}}async delete(e,t){try{await a.workspace.fs.delete(a.Uri.file(t));const n=this.promptLoader.renderPrompt("delete-steering",{documentName:e,steeringPath:this.getSteeringBasePath()});await u.NotificationUtils.showAutoDismissNotification(`Deleting "${e}" and updating CLAUDE.md...`);const i=await this.claudeCodeProvider.invokeClaudeHeadless(n);if(0===i.exitCode)return await u.NotificationUtils.showAutoDismissNotification(`Steering document "${e}" deleted and CLAUDE.md updated successfully.`),{success:!0};if(void 0!==i.exitCode){const e=`Failed to update CLAUDE.md. Exit code: ${i.exitCode}`;return this.outputChannel.appendLine(`[Steering] ${e}`),{success:!1,error:e}}return{success:!0}}catch(e){const t=`Failed to delete steering document: ${e}`;return this.outputChannel.appendLine(`[Steering] ${t}`),{success:!1,error:t}}}async init(){const e=a.workspace.workspaceFolders?.[0];if(!e)return void a.window.showErrorMessage("No workspace folder open");const t=await this.getSteeringDocuments();if(t.length>0){const e=t.map(e=>e.name).join(", ");if("Continue"!==await a.window.showWarningMessage(`Steering documents already exist (${e}). Init steering will analyze the project again but won't overwrite existing files.`,"Continue","Cancel"))return}const n=c.join(e.uri.fsPath,this.getSteeringBasePath());await a.workspace.fs.createDirectory(a.Uri.file(n)),await a.window.withProgress({location:a.ProgressLocation.Notification,title:"Analyzing project and generating steering documents...",cancellable:!1},async()=>{const e=this.promptLoader.renderPrompt("init-steering",{steeringPath:this.getSteeringBasePath()});await this.claudeCodeProvider.invokeClaudeSplitView(e,"Prisma - Init Steering"),await u.NotificationUtils.showAutoDismissNotification("Steering documents generation started. Check the terminal for progress.")})}async refine(e){const t=this.promptLoader.renderPrompt("refine-steering",{filePath:e.fsPath});await this.claudeCodeProvider.invokeClaudeSplitView(t,"Prisma - Refine Steering"),await u.NotificationUtils.showAutoDismissNotification("Claude is refining the steering document. Check the terminal for progress.")}async getSteeringDocuments(){const e=a.workspace.workspaceFolders?.[0];if(!e)return[];const t=c.join(e.uri.fsPath,this.getSteeringBasePath());try{return(await a.workspace.fs.readDirectory(a.Uri.file(t))).filter(([e,t])=>t===a.FileType.File&&e.endsWith(".md")).map(([e])=>({name:e.replace(".md",""),path:c.join(t,e)}))}catch(e){return[]}}async createProjectClaudeMd(){const e=a.window.createTerminal({name:"Claude Code - Init",cwd:a.workspace.workspaceFolders?.[0]?.uri.fsPath,location:{viewColumn:a.ViewColumn.Two}});e.show();const t=this.configManager.getTerminalDelay();setTimeout(()=>{e.sendText('claude --permission-mode bypassPermissions "/init"')},t)}async createUserClaudeMd(){const e=c.join(process.env.HOME||"",".claude"),t=c.join(e,"CLAUDE.md");try{await a.workspace.fs.createDirectory(a.Uri.file(e))}catch(e){}try{if(await a.workspace.fs.stat(a.Uri.file(t)),"Overwrite"!==await a.window.showWarningMessage("Global CLAUDE.md already exists. Overwrite?","Overwrite","Cancel"))return}catch{}await a.workspace.fs.writeFile(a.Uri.file(t),Buffer.from(""));const n=await a.workspace.openTextDocument(t);await a.window.showTextDocument(n),await u.NotificationUtils.showAutoDismissNotification("Created global CLAUDE.md file")}}},8425:(e,t,n)=>{"use strict";t.__esModule=!0,t.SourceLocation=function(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}},t.id=function(e){return/^\[.*\]$/.test(e)?e.substring(1,e.length-1):e},t.stripFlags=function(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}},t.stripComment=function(e){return e.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")},t.preparePath=function(e,t,n){n=this.locInfo(n);for(var i=e?"@":"",s=[],o=0,a=0,c=t.length;a<c;a++){var l=t[a].part,u=t[a].original!==l;if(i+=(t[a].separator||"")+l,u||".."!==l&&"."!==l&&"this"!==l)s.push(l);else{if(s.length>0)throw new r.default("Invalid path: "+i,{loc:n});".."===l&&o++}}return{type:"PathExpression",data:e,depth:o,parts:s,original:i,loc:n}},t.prepareMustache=function(e,t,n,i,r,s){var o=i.charAt(3)||i.charAt(2),a="{"!==o&&"&"!==o;return{type:/\*/.test(i)?"Decorator":"MustacheStatement",path:e,params:t,hash:n,escaped:a,strip:r,loc:this.locInfo(s)}},t.prepareRawBlock=function(e,t,n,i){s(e,n);var r={type:"Program",body:t,strip:{},loc:i=this.locInfo(i)};return{type:"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:r,openStrip:{},inverseStrip:{},closeStrip:{},loc:i}},t.prepareBlock=function(e,t,n,i,o,a){i&&i.path&&s(e,i);var c=/\*/.test(e.open);t.blockParams=e.blockParams;var l=void 0,u=void 0;if(n){if(c)throw new r.default("Unexpected inverse block on decorator",n);n.chain&&(n.program.body[0].closeStrip=i.strip),u=n.strip,l=n.program}return o&&(o=l,l=t,t=o),{type:c?"DecoratorBlock":"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:t,inverse:l,openStrip:e.strip,inverseStrip:u,closeStrip:i&&i.strip,loc:this.locInfo(a)}},t.prepareProgram=function(e,t){if(!t&&e.length){var n=e[0].loc,i=e[e.length-1].loc;n&&i&&(t={source:n.source,start:{line:n.start.line,column:n.start.column},end:{line:i.end.line,column:i.end.column}})}return{type:"Program",body:e,strip:{},loc:t}},t.preparePartialBlock=function(e,t,n,i){return s(e,n),{type:"PartialBlockStatement",name:e.path,params:e.params,hash:e.hash,program:t,openStrip:e.strip,closeStrip:n&&n.strip,loc:this.locInfo(i)}};var i,r=(i=n(3769))&&i.__esModule?i:{default:i};function s(e,t){if(t=t.path?t.path.original:t,e.path.original!==t){var n={loc:e.path.loc};throw new r.default(e.path.original+" doesn't match "+t,n)}}},8433:e=>{"use strict";function t(e){return null==e}e.exports.isNothing=t,e.exports.isObject=function(e){return"object"==typeof e&&null!==e},e.exports.toArray=function(e){return Array.isArray(e)?e:t(e)?[]:[e]},e.exports.repeat=function(e,t){var n,i="";for(n=0;n<t;n+=1)i+=e;return i},e.exports.isNegativeZero=function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},e.exports.extend=function(e,t){var n,i,r,s;if(t)for(n=0,i=(s=Object.keys(t)).length;n<i;n+=1)e[r=s[n]]=t[r];return e}},8636:(e,t,n)=>{"use strict";var i=n(5388);e.exports=new i("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}})},8916:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},i(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),o=0;o<n.length;o++)"default"!==n[o]&&r(t,e,n[o]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.PromptLoader=void 0;const a=o(n(7341)),c=o(n(8332));class l{static instance;prompts=new Map;compiledTemplates=new Map;constructor(){}static getInstance(){return l.instance||(l.instance=new l),l.instance}initialize(){this.prompts.clear(),this.compiledTemplates.clear();const e=Object.values(c);for(const t of e)t.frontmatter&&t.content&&this.registerPrompt(t)}registerPrompt(e){const{id:t}=e.frontmatter;this.prompts.set(t,e);try{const n=a.compile(e.content);this.compiledTemplates.set(t,n)}catch(e){}}loadPrompt(e){const t=this.prompts.get(e);if(!t)throw new Error(`Prompt not found: ${e}. Available prompts: ${Array.from(this.prompts.keys()).join(", ")}`);return t}renderPrompt(e,t={}){const n=this.loadPrompt(e),i=this.compiledTemplates.get(e);if(!i)throw new Error(`Compiled template not found: ${e}`);const r=this.validateVariables(n.frontmatter,t);if(!r.valid)throw new Error(`Variable validation failed: ${r.errors?.join(", ")}`);try{return i(t)}catch(t){throw new Error(`Failed to render template ${e}: ${t}`)}}validateVariables(e,t){const n=[];if(e.variables)for(const[i,r]of Object.entries(e.variables))r.required&&!(i in t)&&n.push(`Missing required variable: ${i}`);return{valid:0===n.length,errors:n}}listPrompts(){const e=[];for(const[t,n]of this.prompts){const i=t.split("-")[0];e.push({id:t,name:n.frontmatter.name,version:n.frontmatter.version,description:n.frontmatter.description,category:i})}return e}}t.PromptLoader=l},8998:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},i(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),o=0;o<n.length;o++)"default"!==n[o]&&r(t,e,n[o]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.PermissionManager=void 0;const a=o(n(1398)),c=n(3111),l=n(1283),u=n(4334),p=n(7591),h=n(7402);t.PermissionManager=class{context;outputChannel;cache;configReader;permissionWebview;currentTerminal;disposables=[];constructor(e,t){this.context=e,this.outputChannel=t,this.configReader=new c.ConfigReader(t),this.cache=new l.PermissionCache(this.configReader,t);const n=this.cache.event(async e=>{this.outputChannel.appendLine(`[PermissionManager] Event received with hasPermission: ${e}`),e?(this.outputChannel.appendLine("[PermissionManager] Permission granted detected, closing UI elements"),this.outputChannel.appendLine("[PermissionManager] Permission granted, closing UI elements"),this.closeUIElements(),h.NotificationUtils.showAutoDismissNotification("✅ Claude Code permissions detected and verified!")):(this.outputChannel.appendLine("[PermissionManager] Permission revoked detected, showing setup"),a.window.showWarningMessage("Claude Code permissions have been revoked. Please grant permissions again."),await this.showPermissionSetup())});this.disposables.push(n)}async initializePermissions(){this.outputChannel.appendLine("[PermissionManager] Initializing permissions..."),this.startMonitoring();let e=await this.cache.refreshAndGet();if(e)return this.outputChannel.appendLine("[PermissionManager] Permissions already granted"),!0;for(this.outputChannel.appendLine("[PermissionManager] No permissions found, showing setup"),e=await this.showPermissionSetup();!e;){const t=await a.window.showWarningMessage("Claude Code permissions not granted. The extension will not work. Please approve or uninstall.","Try Again","Uninstall");if("Try Again"===t)await this.showPermissionSetup()&&(e=!0);else if("Uninstall"===t&&(this.outputChannel.appendLine("[PermissionManager] User chose to uninstall"),"Uninstall"===await a.window.showWarningMessage("Are you sure you want to uninstall Prisma for Claude Code?","Keep It","Uninstall"))){try{await a.commands.executeCommand("workbench.extensions.uninstallExtension","matheusmaiberg.prisma-for-cc"),this.outputChannel.appendLine("[PermissionManager] Uninstall command executed")}catch(e){this.outputChannel.appendLine(`[PermissionManager] Failed to uninstall: ${e}`)}await a.commands.executeCommand("extension.open","matheusmaiberg.prisma-for-cc");break}}return e}async checkPermission(){return this.cache.get()}async grantPermission(){try{return await this.configReader.setBypassPermission(!0),await this.cache.refresh(),this.outputChannel.appendLine("[PermissionManager] Permission granted via WebView"),!0}catch(e){return this.outputChannel.appendLine(`[PermissionManager] Failed to grant permission: ${e}`),!1}}async showPermissionSetup(){return new Promise(e=>{try{this.outputChannel.appendLine("[PermissionManager] Starting permission setup flow..."),this.outputChannel.appendLine("[PermissionManager] showPermissionSetup called"),this.currentTerminal=p.ClaudeCodeProvider.createPermissionTerminal(),u.PermissionWebview.createOrShow(this.context,{onAccept:async()=>{this.outputChannel.appendLine("[PermissionManager] User accepted, granting permission");const t=await this.grantPermission();return t&&(this.closeUIElements(),e(!0)),t},onCancel:()=>{this.outputChannel.appendLine("[PermissionManager] User cancelled"),this.closeUIElements(),e(!1)},onDispose:()=>{this.outputChannel.appendLine("[PermissionManager] WebView disposed"),this.currentTerminal&&(this.currentTerminal.dispose(),this.currentTerminal=void 0),e(!1)}},this.outputChannel),this.permissionWebview=u.PermissionWebview.currentPanel,this.outputChannel.appendLine("[PermissionManager] WebView reference saved: "+(this.permissionWebview?"Yes":"No"))}catch(t){this.outputChannel.appendLine(`[PermissionManager] Error in showPermissionSetup: ${t}`),e(!1)}})}closeUIElements(){this.outputChannel.appendLine("[PermissionManager] Closing UI elements"),this.permissionWebview&&(u.PermissionWebview.close(),this.permissionWebview=void 0),this.currentTerminal&&(this.currentTerminal.dispose(),this.currentTerminal=void 0)}startMonitoring(){this.outputChannel.appendLine("[PermissionManager] Starting file monitoring..."),this.configReader.watchConfigFile(async()=>{await this.cache.refresh()})}async resetPermission(){try{return this.outputChannel.appendLine("[PermissionManager] Resetting permission to false..."),await this.configReader.setBypassPermission(!1),await this.cache.refresh(),this.outputChannel.appendLine("[PermissionManager] Permission reset completed"),!0}catch(e){return this.outputChannel.appendLine(`[PermissionManager] Failed to reset permission: ${e}`),!1}}dispose(){this.disposables.forEach(e=>e.dispose()),this.configReader.dispose(),this.permissionWebview&&this.permissionWebview.dispose(),this.currentTerminal&&this.currentTerminal.dispose(),this.outputChannel.appendLine("[PermissionManager] Disposed")}}},9010:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},i(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),o=0;o<n.length;o++)"default"!==n[o]&&r(t,e,n[o]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.getVSCodeLanguage=c,t.getDirectoryNames=l,t.getClaudePath=function(e,t){return`.claude/${l(c())[t]}`};const a=o(n(1398));function c(){return a.env.language.startsWith("pt")?"pt":"en"}function l(e){const t={agents:"agents",prompts:"system-prompts",commands:"commands",templates:"templates",steering:"steering",settings:"settings"};return"pt"===e?{...t,specs:"especificacoes"}:{...t,specs:"specs"}}},9016:(e,t,n)=>{"use strict";t.__esModule=!0,t.print=function(e){return(new s).accept(e)},t.PrintVisitor=s;var i,r=(i=n(1350))&&i.__esModule?i:{default:i};function s(){this.padding=0}s.prototype=new r.default,s.prototype.pad=function(e){for(var t="",n=0,i=this.padding;n<i;n++)t+="  ";return t+(e+"\n")},s.prototype.Program=function(e){var t="",n=e.body,i=void 0,r=void 0;if(e.blockParams){var s="BLOCK PARAMS: [";for(i=0,r=e.blockParams.length;i<r;i++)s+=" "+e.blockParams[i];s+=" ]",t+=this.pad(s)}for(i=0,r=n.length;i<r;i++)t+=this.accept(n[i]);return this.padding--,t},s.prototype.MustacheStatement=function(e){return this.pad("{{ "+this.SubExpression(e)+" }}")},s.prototype.Decorator=function(e){return this.pad("{{ DIRECTIVE "+this.SubExpression(e)+" }}")},s.prototype.BlockStatement=s.prototype.DecoratorBlock=function(e){var t="";return t+=this.pad(("DecoratorBlock"===e.type?"DIRECTIVE ":"")+"BLOCK:"),this.padding++,t+=this.pad(this.SubExpression(e)),e.program&&(t+=this.pad("PROGRAM:"),this.padding++,t+=this.accept(e.program),this.padding--),e.inverse&&(e.program&&this.padding++,t+=this.pad("{{^}}"),this.padding++,t+=this.accept(e.inverse),this.padding--,e.program&&this.padding--),this.padding--,t},s.prototype.PartialStatement=function(e){var t="PARTIAL:"+e.name.original;return e.params[0]&&(t+=" "+this.accept(e.params[0])),e.hash&&(t+=" "+this.accept(e.hash)),this.pad("{{> "+t+" }}")},s.prototype.PartialBlockStatement=function(e){var t="PARTIAL BLOCK:"+e.name.original;return e.params[0]&&(t+=" "+this.accept(e.params[0])),e.hash&&(t+=" "+this.accept(e.hash)),t+=" "+this.pad("PROGRAM:"),this.padding++,t+=this.accept(e.program),this.padding--,this.pad("{{> "+t+" }}")},s.prototype.ContentStatement=function(e){return this.pad("CONTENT[ '"+e.value+"' ]")},s.prototype.CommentStatement=function(e){return this.pad("{{! '"+e.value+"' }}")},s.prototype.SubExpression=function(e){for(var t,n=e.params,i=[],r=0,s=n.length;r<s;r++)i.push(this.accept(n[r]));return n="["+i.join(", ")+"]",t=e.hash?" "+this.accept(e.hash):"",this.accept(e.path)+" "+n+t},s.prototype.PathExpression=function(e){var t=e.parts.join("/");return(e.data?"@":"")+"PATH:"+t},s.prototype.StringLiteral=function(e){return'"'+e.value+'"'},s.prototype.NumberLiteral=function(e){return"NUMBER{"+e.value+"}"},s.prototype.BooleanLiteral=function(e){return"BOOLEAN{"+e.value+"}"},s.prototype.UndefinedLiteral=function(){return"UNDEFINED"},s.prototype.NullLiteral=function(){return"NULL"},s.prototype.Hash=function(e){for(var t=e.pairs,n=[],i=0,r=t.length;i<r;i++)n.push(this.accept(t[i]));return"HASH{"+n.join(", ")+"}"},s.prototype.HashPair=function(e){return e.key+"="+this.accept(e.value)}},9023:e=>{"use strict";e.exports=require("util")},9027:(e,t,n)=>{"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.parseWithoutProcessing=l,t.parse=function(e,t){var n=l(e,t);return new s.default(t).accept(n)};var r=i(n(6201)),s=i(n(915)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(8425)),a=n(2849);t.parser=r.default;var c={};function l(e,t){return"Program"===e.type?e:(r.default.yy=c,c.locInfo=function(e){return new c.SourceLocation(t&&t.srcName,e)},r.default.parse(e))}a.extend(c,o)},9198:(e,t,n)=>{"use strict";var i=n(5388);e.exports=new i("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"})},9243:(e,t,n)=>{"use strict";var i=n(8433),r=n(1231),s=n(8083),o=n(5489),a=Object.prototype.hasOwnProperty,c=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,l=/[\x85\u2028\u2029]/,u=/[,\[\]\{\}]/,p=/^(?:!|!!|![a-z\-]+!)$/i,h=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function d(e){return Object.prototype.toString.call(e)}function f(e){return 10===e||13===e}function m(e){return 9===e||32===e}function g(e){return 9===e||32===e||10===e||13===e}function v(e){return 44===e||91===e||93===e||123===e||125===e}function w(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function y(e){return 120===e?2:117===e?4:85===e?8:0}function b(e){return 48<=e&&e<=57?e-48:-1}function k(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?" ":76===e?"\u2028":80===e?"\u2029":""}function C(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var P=new Array(256),S=new Array(256),_=0;_<256;_++)P[_]=k(_)?1:0,S[_]=k(_);function x(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||o,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function T(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=s(n),new r(t,n)}function O(e,t){throw T(e,t)}function A(e,t){e.onWarning&&e.onWarning.call(null,T(e,t))}var M={YAML:function(e,t,n){var i,r,s;null!==e.version&&O(e,"duplication of %YAML directive"),1!==n.length&&O(e,"YAML directive accepts exactly one argument"),null===(i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&O(e,"ill-formed argument of the YAML directive"),r=parseInt(i[1],10),s=parseInt(i[2],10),1!==r&&O(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,1!==s&&2!==s&&A(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var i,r;2!==n.length&&O(e,"TAG directive accepts exactly two arguments"),i=n[0],r=n[1],p.test(i)||O(e,"ill-formed tag handle (first argument) of the TAG directive"),a.call(e.tagMap,i)&&O(e,'there is a previously declared suffix for "'+i+'" tag handle'),h.test(r)||O(e,"ill-formed tag prefix (second argument) of the TAG directive");try{r=decodeURIComponent(r)}catch(t){O(e,"tag prefix is malformed: "+r)}e.tagMap[i]=r}};function L(e,t,n,i){var r,s,o,a;if(t<n){if(a=e.input.slice(t,n),i)for(r=0,s=a.length;r<s;r+=1)9===(o=a.charCodeAt(r))||32<=o&&o<=1114111||O(e,"expected valid JSON character");else c.test(a)&&O(e,"the stream contains non-printable characters");e.result+=a}}function I(e,t,n,r){var s,o,c,l;for(i.isObject(n)||O(e,"cannot merge mappings; the provided source object is unacceptable"),c=0,l=(s=Object.keys(n)).length;c<l;c+=1)o=s[c],a.call(t,o)||(t[o]=n[o],r[o]=!0)}function D(e,t,n,i,r,s,o,c,l){var u,p;if(Array.isArray(r))for(u=0,p=(r=Array.prototype.slice.call(r)).length;u<p;u+=1)Array.isArray(r[u])&&O(e,"nested arrays are not supported inside keys"),"object"==typeof r&&"[object Object]"===d(r[u])&&(r[u]="[object Object]");if("object"==typeof r&&"[object Object]"===d(r)&&(r="[object Object]"),r=String(r),null===t&&(t={}),"tag:yaml.org,2002:merge"===i)if(Array.isArray(s))for(u=0,p=s.length;u<p;u+=1)I(e,t,s[u],n);else I(e,t,s,n);else e.json||a.call(n,r)||!a.call(t,r)||(e.line=o||e.line,e.lineStart=c||e.lineStart,e.position=l||e.position,O(e,"duplicated mapping key")),"__proto__"===r?Object.defineProperty(t,r,{configurable:!0,enumerable:!0,writable:!0,value:s}):t[r]=s,delete n[r];return t}function E(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):O(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function j(e,t,n){for(var i=0,r=e.input.charCodeAt(e.position);0!==r;){for(;m(r);)9===r&&-1===e.firstTabInLine&&(e.firstTabInLine=e.position),r=e.input.charCodeAt(++e.position);if(t&&35===r)do{r=e.input.charCodeAt(++e.position)}while(10!==r&&13!==r&&0!==r);if(!f(r))break;for(E(e),r=e.input.charCodeAt(e.position),i++,e.lineIndent=0;32===r;)e.lineIndent++,r=e.input.charCodeAt(++e.position)}return-1!==n&&0!==i&&e.lineIndent<n&&A(e,"deficient indentation"),i}function N(e){var t,n=e.position;return!(45!==(t=e.input.charCodeAt(n))&&46!==t||t!==e.input.charCodeAt(n+1)||t!==e.input.charCodeAt(n+2)||(n+=3,0!==(t=e.input.charCodeAt(n))&&!g(t)))}function U(e,t){1===t?e.result+=" ":t>1&&(e.result+=i.repeat("\n",t-1))}function F(e,t){var n,i,r=e.tag,s=e.anchor,o=[],a=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=o),i=e.input.charCodeAt(e.position);0!==i&&(-1!==e.firstTabInLine&&(e.position=e.firstTabInLine,O(e,"tab characters must not be used in indentation")),45===i)&&g(e.input.charCodeAt(e.position+1));)if(a=!0,e.position++,j(e,!0,-1)&&e.lineIndent<=t)o.push(null),i=e.input.charCodeAt(e.position);else if(n=e.line,B(e,t,3,!1,!0),o.push(e.result),j(e,!0,-1),i=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==i)O(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!a&&(e.tag=r,e.anchor=s,e.kind="sequence",e.result=o,!0)}function $(e){var t,n,i,r,s=!1,o=!1;if(33!==(r=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&O(e,"duplication of a tag property"),60===(r=e.input.charCodeAt(++e.position))?(s=!0,r=e.input.charCodeAt(++e.position)):33===r?(o=!0,n="!!",r=e.input.charCodeAt(++e.position)):n="!",t=e.position,s){do{r=e.input.charCodeAt(++e.position)}while(0!==r&&62!==r);e.position<e.length?(i=e.input.slice(t,e.position),r=e.input.charCodeAt(++e.position)):O(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==r&&!g(r);)33===r&&(o?O(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),p.test(n)||O(e,"named tag handle cannot contain such characters"),o=!0,t=e.position+1)),r=e.input.charCodeAt(++e.position);i=e.input.slice(t,e.position),u.test(i)&&O(e,"tag suffix cannot contain flow indicator characters")}i&&!h.test(i)&&O(e,"tag name cannot contain such characters: "+i);try{i=decodeURIComponent(i)}catch(t){O(e,"tag name is malformed: "+i)}return s?e.tag=i:a.call(e.tagMap,n)?e.tag=e.tagMap[n]+i:"!"===n?e.tag="!"+i:"!!"===n?e.tag="tag:yaml.org,2002:"+i:O(e,'undeclared tag handle "'+n+'"'),!0}function R(e){var t,n;if(38!==(n=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&O(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!g(n)&&!v(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&O(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function B(e,t,n,r,s){var o,c,l,u,p,h,d,k,_,x=1,T=!1,A=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=c=l=4===n||3===n,r&&j(e,!0,-1)&&(T=!0,e.lineIndent>t?x=1:e.lineIndent===t?x=0:e.lineIndent<t&&(x=-1)),1===x)for(;$(e)||R(e);)j(e,!0,-1)?(T=!0,l=o,e.lineIndent>t?x=1:e.lineIndent===t?x=0:e.lineIndent<t&&(x=-1)):l=!1;if(l&&(l=T||s),1!==x&&4!==n||(k=1===n||2===n?t:t+1,_=e.position-e.lineStart,1===x?l&&(F(e,_)||function(e,t,n){var i,r,s,o,a,c,l,u=e.tag,p=e.anchor,h={},d=Object.create(null),f=null,v=null,w=null,y=!1,b=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=h),l=e.input.charCodeAt(e.position);0!==l;){if(y||-1===e.firstTabInLine||(e.position=e.firstTabInLine,O(e,"tab characters must not be used in indentation")),i=e.input.charCodeAt(e.position+1),s=e.line,63!==l&&58!==l||!g(i)){if(o=e.line,a=e.lineStart,c=e.position,!B(e,n,2,!1,!0))break;if(e.line===s){for(l=e.input.charCodeAt(e.position);m(l);)l=e.input.charCodeAt(++e.position);if(58===l)g(l=e.input.charCodeAt(++e.position))||O(e,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(D(e,h,d,f,v,null,o,a,c),f=v=w=null),b=!0,y=!1,r=!1,f=e.tag,v=e.result;else{if(!b)return e.tag=u,e.anchor=p,!0;O(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!b)return e.tag=u,e.anchor=p,!0;O(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===l?(y&&(D(e,h,d,f,v,null,o,a,c),f=v=w=null),b=!0,y=!0,r=!0):y?(y=!1,r=!0):O(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,l=i;if((e.line===s||e.lineIndent>t)&&(y&&(o=e.line,a=e.lineStart,c=e.position),B(e,t,4,!0,r)&&(y?v=e.result:w=e.result),y||(D(e,h,d,f,v,w,o,a,c),f=v=w=null),j(e,!0,-1),l=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>t)&&0!==l)O(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return y&&D(e,h,d,f,v,null,o,a,c),b&&(e.tag=u,e.anchor=p,e.kind="mapping",e.result=h),b}(e,_,k))||function(e,t){var n,i,r,s,o,a,c,l,u,p,h,d,f=!0,m=e.tag,v=e.anchor,w=Object.create(null);if(91===(d=e.input.charCodeAt(e.position)))o=93,l=!1,s=[];else{if(123!==d)return!1;o=125,l=!0,s={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=s),d=e.input.charCodeAt(++e.position);0!==d;){if(j(e,!0,t),(d=e.input.charCodeAt(e.position))===o)return e.position++,e.tag=m,e.anchor=v,e.kind=l?"mapping":"sequence",e.result=s,!0;f?44===d&&O(e,"expected the node content, but found ','"):O(e,"missed comma between flow collection entries"),h=null,a=c=!1,63===d&&g(e.input.charCodeAt(e.position+1))&&(a=c=!0,e.position++,j(e,!0,t)),n=e.line,i=e.lineStart,r=e.position,B(e,t,1,!1,!0),p=e.tag,u=e.result,j(e,!0,t),d=e.input.charCodeAt(e.position),!c&&e.line!==n||58!==d||(a=!0,d=e.input.charCodeAt(++e.position),j(e,!0,t),B(e,t,1,!1,!0),h=e.result),l?D(e,s,w,p,u,h,n,i,r):a?s.push(D(e,null,w,p,u,h,n,i,r)):s.push(u),j(e,!0,t),44===(d=e.input.charCodeAt(e.position))?(f=!0,d=e.input.charCodeAt(++e.position)):f=!1}O(e,"unexpected end of the stream within a flow collection")}(e,k)?A=!0:(c&&function(e,t){var n,r,s,o,a=1,c=!1,l=!1,u=t,p=0,h=!1;if(124===(o=e.input.charCodeAt(e.position)))r=!1;else{if(62!==o)return!1;r=!0}for(e.kind="scalar",e.result="";0!==o;)if(43===(o=e.input.charCodeAt(++e.position))||45===o)1===a?a=43===o?3:2:O(e,"repeat of a chomping mode identifier");else{if(!((s=b(o))>=0))break;0===s?O(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):l?O(e,"repeat of an indentation width identifier"):(u=t+s-1,l=!0)}if(m(o)){do{o=e.input.charCodeAt(++e.position)}while(m(o));if(35===o)do{o=e.input.charCodeAt(++e.position)}while(!f(o)&&0!==o)}for(;0!==o;){for(E(e),e.lineIndent=0,o=e.input.charCodeAt(e.position);(!l||e.lineIndent<u)&&32===o;)e.lineIndent++,o=e.input.charCodeAt(++e.position);if(!l&&e.lineIndent>u&&(u=e.lineIndent),f(o))p++;else{if(e.lineIndent<u){3===a?e.result+=i.repeat("\n",c?1+p:p):1===a&&c&&(e.result+="\n");break}for(r?m(o)?(h=!0,e.result+=i.repeat("\n",c?1+p:p)):h?(h=!1,e.result+=i.repeat("\n",p+1)):0===p?c&&(e.result+=" "):e.result+=i.repeat("\n",p):e.result+=i.repeat("\n",c?1+p:p),c=!0,l=!0,p=0,n=e.position;!f(o)&&0!==o;)o=e.input.charCodeAt(++e.position);L(e,n,e.position,!1)}}return!0}(e,k)||function(e,t){var n,i,r;if(39!==(n=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,i=r=e.position;0!==(n=e.input.charCodeAt(e.position));)if(39===n){if(L(e,i,e.position,!0),39!==(n=e.input.charCodeAt(++e.position)))return!0;i=e.position,e.position++,r=e.position}else f(n)?(L(e,i,r,!0),U(e,j(e,!1,t)),i=r=e.position):e.position===e.lineStart&&N(e)?O(e,"unexpected end of the document within a single quoted scalar"):(e.position++,r=e.position);O(e,"unexpected end of the stream within a single quoted scalar")}(e,k)||function(e,t){var n,i,r,s,o,a;if(34!==(a=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;0!==(a=e.input.charCodeAt(e.position));){if(34===a)return L(e,n,e.position,!0),e.position++,!0;if(92===a){if(L(e,n,e.position,!0),f(a=e.input.charCodeAt(++e.position)))j(e,!1,t);else if(a<256&&P[a])e.result+=S[a],e.position++;else if((o=y(a))>0){for(r=o,s=0;r>0;r--)(o=w(a=e.input.charCodeAt(++e.position)))>=0?s=(s<<4)+o:O(e,"expected hexadecimal character");e.result+=C(s),e.position++}else O(e,"unknown escape sequence");n=i=e.position}else f(a)?(L(e,n,i,!0),U(e,j(e,!1,t)),n=i=e.position):e.position===e.lineStart&&N(e)?O(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}O(e,"unexpected end of the stream within a double quoted scalar")}(e,k)?A=!0:function(e){var t,n,i;if(42!==(i=e.input.charCodeAt(e.position)))return!1;for(i=e.input.charCodeAt(++e.position),t=e.position;0!==i&&!g(i)&&!v(i);)i=e.input.charCodeAt(++e.position);return e.position===t&&O(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),a.call(e.anchorMap,n)||O(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],j(e,!0,-1),!0}(e)?(A=!0,null===e.tag&&null===e.anchor||O(e,"alias node should not have any properties")):function(e,t,n){var i,r,s,o,a,c,l,u,p=e.kind,h=e.result;if(g(u=e.input.charCodeAt(e.position))||v(u)||35===u||38===u||42===u||33===u||124===u||62===u||39===u||34===u||37===u||64===u||96===u)return!1;if((63===u||45===u)&&(g(i=e.input.charCodeAt(e.position+1))||n&&v(i)))return!1;for(e.kind="scalar",e.result="",r=s=e.position,o=!1;0!==u;){if(58===u){if(g(i=e.input.charCodeAt(e.position+1))||n&&v(i))break}else if(35===u){if(g(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&N(e)||n&&v(u))break;if(f(u)){if(a=e.line,c=e.lineStart,l=e.lineIndent,j(e,!1,-1),e.lineIndent>=t){o=!0,u=e.input.charCodeAt(e.position);continue}e.position=s,e.line=a,e.lineStart=c,e.lineIndent=l;break}}o&&(L(e,r,s,!1),U(e,e.line-a),r=s=e.position,o=!1),m(u)||(s=e.position+1),u=e.input.charCodeAt(++e.position)}return L(e,r,s,!1),!!e.result||(e.kind=p,e.result=h,!1)}(e,k,1===n)&&(A=!0,null===e.tag&&(e.tag="?")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===x&&(A=l&&F(e,_))),null===e.tag)null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);else if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&O(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),u=0,p=e.implicitTypes.length;u<p;u+=1)if((d=e.implicitTypes[u]).resolve(e.result)){e.result=d.construct(e.result),e.tag=d.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else if("!"!==e.tag){if(a.call(e.typeMap[e.kind||"fallback"],e.tag))d=e.typeMap[e.kind||"fallback"][e.tag];else for(d=null,u=0,p=(h=e.typeMap.multi[e.kind||"fallback"]).length;u<p;u+=1)if(e.tag.slice(0,h[u].tag.length)===h[u].tag){d=h[u];break}d||O(e,"unknown tag !<"+e.tag+">"),null!==e.result&&d.kind!==e.kind&&O(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+d.kind+'", not "'+e.kind+'"'),d.resolve(e.result,e.tag)?(e.result=d.construct(e.result,e.tag),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):O(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||A}function W(e){var t,n,i,r,s=e.position,o=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);0!==(r=e.input.charCodeAt(e.position))&&(j(e,!0,-1),r=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==r));){for(o=!0,r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!g(r);)r=e.input.charCodeAt(++e.position);for(i=[],(n=e.input.slice(t,e.position)).length<1&&O(e,"directive name must not be less than one character in length");0!==r;){for(;m(r);)r=e.input.charCodeAt(++e.position);if(35===r){do{r=e.input.charCodeAt(++e.position)}while(0!==r&&!f(r));break}if(f(r))break;for(t=e.position;0!==r&&!g(r);)r=e.input.charCodeAt(++e.position);i.push(e.input.slice(t,e.position))}0!==r&&E(e),a.call(M,n)?M[n](e,n,i):A(e,'unknown document directive "'+n+'"')}j(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,j(e,!0,-1)):o&&O(e,"directives end mark is expected"),B(e,e.lineIndent-1,4,!1,!0),j(e,!0,-1),e.checkLineBreaks&&l.test(e.input.slice(s,e.position))&&A(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&N(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,j(e,!0,-1)):e.position<e.length-1&&O(e,"end of the stream or a document separator is expected")}function H(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var n=new x(e,t),i=e.indexOf("\0");for(-1!==i&&(n.position=i,O(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)W(n);return n.documents}e.exports.loadAll=function(e,t,n){null!==t&&"object"==typeof t&&void 0===n&&(n=t,t=null);var i=H(e,n);if("function"!=typeof t)return i;for(var r=0,s=i.length;r<s;r+=1)t(i[r])},e.exports.load=function(e,t){var n=H(e,t);if(0!==n.length){if(1===n.length)return n[0];throw new r("expected a single document in the stream, but found more")}}},9342:(e,t,n)=>{"use strict";var i=n(5388),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";e.exports=new i("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,i=0,s=e.length,o=r;for(n=0;n<s;n++)if(!((t=o.indexOf(e.charAt(n)))>64)){if(t<0)return!1;i+=6}return i%8==0},construct:function(e){var t,n,i=e.replace(/[\r\n=]/g,""),s=i.length,o=r,a=0,c=[];for(t=0;t<s;t++)t%4==0&&t&&(c.push(a>>16&255),c.push(a>>8&255),c.push(255&a)),a=a<<6|o.indexOf(i.charAt(t));return 0==(n=s%4*6)?(c.push(a>>16&255),c.push(a>>8&255),c.push(255&a)):18===n?(c.push(a>>10&255),c.push(a>>2&255)):12===n&&c.push(a>>4&255),new Uint8Array(c)},predicate:function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},represent:function(e){var t,n,i="",s=0,o=e.length,a=r;for(t=0;t<o;t++)t%3==0&&t&&(i+=a[s>>18&63],i+=a[s>>12&63],i+=a[s>>6&63],i+=a[63&s]),s=(s<<8)+e[t];return 0==(n=o%3)?(i+=a[s>>18&63],i+=a[s>>12&63],i+=a[s>>6&63],i+=a[63&s]):2===n?(i+=a[s>>10&63],i+=a[s>>4&63],i+=a[s<<2&63],i+=a[64]):1===n&&(i+=a[s>>2&63],i+=a[s<<4&63],i+=a[64],i+=a[64]),i}})},9508:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.content=t.frontmatter=void 0,t.frontmatter={id:"init-steering",name:"Initialize Steering",version:"1.0.0",description:"Complete prompt for initializing steering documents",variables:{steeringPath:{type:"string",required:!0,description:"Path where steering documents should be created"}}},t.content='\n<system>\nYou are analyzing a codebase to create steering documents that will guide AI assistants working on this project.\n\n## Context\n\nSteering documents will be injected into AI conversations with this wrapper:\n"I am providing you some additional guidance that you should follow for your entire execution. These are intended to steer you in the right direction. You should follow these instructions for all following responses."\n\n## Writing Guidelines\n\nWrite content as direct instructions to the AI agent:\n\n- Use imperative mood ("Use X", "Avoid Y", "Always Z")\n- Be specific to THIS codebase\'s patterns and conventions\n- Include concrete examples from actual files when relevant\n- Skip generic programming advice\n\n## Required Files\n\nCreate exactly these three files by analyzing the codebase:\n\n1. **{{steeringPath}}/product.md**\n   - Product purpose and core features\n   - User value proposition\n   - Key business logic rules\n\n2. **{{steeringPath}}/tech.md**\n   - Tech stack and frameworks used\n   - Build system and dependencies\n   - Common commands (build, test, run, deploy)\n   - Project-specific conventions\n\n3. **{{steeringPath}}/structure.md**\n   - Directory organization\n   - File naming patterns\n   - Component/module architecture\n   - Key file locations\n\n## Important\n\n- Check if files exist before creating (DO NOT overwrite)\n- Write directly to filesystem\n- Keep content concise but complete\n- If CLAUDE.md exists, update its "## Steering Documents" section\n</system>\n\n# Initialize Steering Documents\n\nAnalyze this repository and create basic steering rules that would help guide an AI assistant.\n\nSteering documents are markdown files that should be created in the \'{{steeringPath}}\' directory.\n\nFocus on project conventions, code style, architecture patterns, and any specific rules that should be followed when working with this codebase.\n\nFor the initial setup, please create the following files:\n\n- product.md: Short summary of the product, its purpose, key features, and user value proposition\n- tech.md: Build system used, tech stack, libraries, frameworks etc. Include a section for common commands (building, testing, running, etc.)\n- structure.md: Project organization, folder structure, and key file locations\n\nThe goal is to be succinct, but capture information that will be useful for an AI assistant operating in this project.\n\nIMPORTANT:\n\n1. Write each file directly to the filesystem at the appropriate path in {{steeringPath}}/\n2. Check if any of these files already exist before creating them. If a file already exists, DO NOT modify or overwrite it - skip it completely\n3. Only create files that don\'t exist\n4. If a project CLAUDE.md exists, create or update the "## Steering Documents" section listing all steering documents with their descriptions and paths\n',t.default={frontmatter:t.frontmatter,content:t.content}},9613:(e,t)=>{"use strict";function n(e){this.string=e}t.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},t.default=n,e.exports=t.default},9632:(e,t,n)=>{"use strict";t.__esModule=!0;var i=n(2849),r=void 0;function s(e,t,n){if(i.isArray(e)){for(var r=[],s=0,o=e.length;s<o;s++)r.push(t.wrap(e[s],n));return r}return"boolean"==typeof e||"number"==typeof e?e+"":e}function o(e){this.srcFile=e,this.source=[]}r||((r=function(e,t,n,i){this.src="",i&&this.add(i)}).prototype={add:function(e){i.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){i.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),o.prototype={isEmpty:function(){return!this.source.length},prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var e=this.empty();return this.each(function(t){e.add(["  ",t,"\n"])}),e},each:function(e){for(var t=0,n=this.source.length;t<n;t++)e(this.source[t])},empty:function(){var e=this.currentLocation||{start:{}};return new r(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return e instanceof r?e:(e=s(e,this,t),new r(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,n){return n=this.generateList(n),this.wrap([e,t?"."+t+"(":"(",n,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=this,n=[];Object.keys(e).forEach(function(i){var r=s(e[i],t);"undefined"!==r&&n.push([t.quotedString(i),":",r])});var i=this.generateList(n);return i.prepend("{"),i.add("}"),i},generateList:function(e){for(var t=this.empty(),n=0,i=e.length;n<i;n++)n&&t.add(","),t.add(s(e[n],this));return t},generateArray:function(e){var t=this.generateList(e);return t.prepend("["),t.add("]"),t}},t.default=o,e.exports=t.default},9658:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},i(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),o=0;o<n.length;o++)"default"!==n[o]&&r(t,e,n[o]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.SpecManager=void 0;const a=o(n(1398)),c=o(n(6928)),l=n(6807),u=n(7402),p=n(8916);t.SpecManager=class{claudeProvider;outputChannel;configManager;promptLoader;constructor(e,t){this.claudeProvider=e,this.outputChannel=t,this.configManager=l.ConfigManager.getInstance(),this.configManager.loadSettings(),this.promptLoader=p.PromptLoader.getInstance()}async getSpecBasePath(){return await this.configManager.loadSettings(),this.configManager.getPath("specs")}async create(){const e=await a.window.showInputBox({title:"✨ Create New Spec ✨",prompt:"Specs are a structured way to build features so you can plan before building",placeHolder:"Enter your idea to generate requirement, design, and task specs...",ignoreFocusOut:!1});if(!e)return;const t=a.workspace.workspaceFolders?.[0];if(!t)return void a.window.showErrorMessage("No workspace folder open");u.NotificationUtils.showAutoDismissNotification("Claude is creating your spec. Check the terminal for progress.");const n=await this.getSpecBasePath(),i=this.promptLoader.renderPrompt("create-spec",{description:e,workspacePath:t.uri.fsPath,specBasePath:n}),r=await this.claudeProvider.invokeClaudeSplitView(i,"Prisma - Creating Spec");this.setupSpecFolderWatcher(t,r).catch(e=>{this.outputChannel.appendLine(`[SpecManager] Failed to set up watcher: ${e}`)})}async createWithAgents(){const e=await a.window.showInputBox({title:"✨ Create New Spec with Agents ✨",prompt:"This will use specialized subagents for creating requirements, design, and tasks",placeHolder:"Enter your idea to generate requirement, design, and task specs...",ignoreFocusOut:!1});if(!e)return;const t=a.workspace.workspaceFolders?.[0];if(!t)return void a.window.showErrorMessage("No workspace folder open");u.NotificationUtils.showAutoDismissNotification("Claude is creating your spec with specialized agents. Check the terminal for progress.");const n=await this.getSpecBasePath(),i=this.promptLoader.renderPrompt("create-spec-with-agents",{description:e,workspacePath:t.uri.fsPath,specBasePath:n}),r=await this.claudeProvider.invokeClaudeSplitView(i,"Prisma - Creating Spec (Agents)");this.setupSpecFolderWatcher(t,r).catch(e=>{this.outputChannel.appendLine(`[SpecManager] Failed to set up watcher: ${e}`)})}async implTask(e,t){const n=a.workspace.workspaceFolders?.[0];if(!n)return void a.window.showErrorMessage("No workspace folder open");u.NotificationUtils.showAutoDismissNotification("Claude is implementing your task. Check the terminal for progress.");const i=this.promptLoader.renderPrompt("impl-task",{taskFilePath:e,taskDescription:t});await this.claudeProvider.invokeClaudeSplitView(i,"Prisma - Implementing Task")}async setupSpecFolderWatcher(e,t){const n=await this.getSpecBasePath(),i=a.workspace.createFileSystemWatcher(new a.RelativePattern(e,`${n}/*`),!1,!0,!0);let r=!1;const s=i.onDidCreate(async e=>{if(r)return;try{if((await a.workspace.fs.stat(e)).type!==a.FileType.Directory)return void this.outputChannel.appendLine(`[SpecManager] Skipping non-directory: ${e.fsPath}`)}catch(e){return void this.outputChannel.appendLine(`[SpecManager] Error checking path: ${e}`)}const n=c.basename(e.fsPath);this.outputChannel.appendLine(`[SpecManager] New spec detected: ${n}`);try{await this.claudeProvider.renameTerminal(t,`Spec: ${n}`)}catch(e){this.outputChannel.appendLine(`[SpecManager] Failed to rename terminal: ${e}`)}this.disposeWatcher(s,i),r=!0});setTimeout(()=>{r||(this.outputChannel.appendLine("[SpecManager] Watcher timeout - cleaning up"),this.disposeWatcher(s,i),r=!0)},6e4)}disposeWatcher(e,t){e.dispose(),t.dispose(),this.outputChannel.appendLine("[SpecManager] Watcher disposed")}async navigateToDocument(e,t){const n=a.workspace.workspaceFolders?.[0];if(!n)return;const i=await this.getSpecBasePath(),r=c.join(n.uri.fsPath,i,e,`${t}.md`);try{const e=await a.workspace.openTextDocument(r);await a.window.showTextDocument(e)}catch(n){const i=`\x3c!-- prisma-spec: ${e}/${t} --\x3e`;for(const e of a.workspace.textDocuments)if(e.isUntitled&&e.getText().includes(i))return void await a.window.showTextDocument(e,{preview:!1,viewColumn:a.ViewColumn.Active});let r=`${i}\n# ${t.charAt(0).toUpperCase()+t.slice(1)} Document\n\nThis document has not been created yet.`;"design"===t?r+="\n\nPlease approve the requirements document first.":"tasks"===t?r+="\n\nPlease approve the design document first.":"requirements"===t&&(r+='\n\nRun "Create New Spec" to generate this document.');const s=await a.workspace.openTextDocument({content:r,language:"markdown"});await a.window.showTextDocument(s,{preview:!1,viewColumn:a.ViewColumn.Active})}}async delete(e){const t=a.workspace.workspaceFolders?.[0];if(!t)return void a.window.showErrorMessage("No workspace folder open");const n=await this.getSpecBasePath(),i=c.join(t.uri.fsPath,n,e);try{await a.workspace.fs.delete(a.Uri.file(i),{recursive:!0}),await u.NotificationUtils.showAutoDismissNotification(`Spec "${e}" deleted successfully`)}catch(e){this.outputChannel.appendLine(`[SpecManager] Failed to delete spec: ${e}`),a.window.showErrorMessage(`Failed to delete spec: ${e}`)}}async getSpecList(){const e=a.workspace.workspaceFolders?.[0];if(!e)return[];const t=await this.getSpecBasePath(),n=c.join(e.uri.fsPath,t);try{await a.workspace.fs.stat(a.Uri.file(n))}catch{try{this.outputChannel.appendLine(`[SpecManager] Creating ${t} directory`),await a.workspace.fs.createDirectory(a.Uri.file(c.dirname(n))),await a.workspace.fs.createDirectory(a.Uri.file(n))}catch{}}try{return(await a.workspace.fs.readDirectory(a.Uri.file(n))).filter(([,e])=>e===a.FileType.Directory).map(([e])=>e)}catch(e){return[]}}}},9726:(e,t,n)=>{"use strict";t.__esModule=!0,t.createNewLookupObject=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.extend.apply(void 0,[Object.create(null)].concat(t))};var i=n(2849)},9896:e=>{"use strict";e.exports=require("fs")},9943:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.content=t.frontmatter=void 0,t.frontmatter={id:"delete-steering",name:"Delete Steering",version:"1.0.0",description:"Prompt for updating CLAUDE.md after deleting a steering document",variables:{documentName:{type:"string",required:!0,description:"Name of the deleted steering document"},steeringPath:{type:"string",required:!0,description:"Path where steering documents are stored"}}},t.content='\nThe steering document "{{documentName}}" has been deleted from {{steeringPath}}.\n\nIf a project CLAUDE.md exists and contains a "## Steering Documents" section, please update it to remove the reference to this deleted document.\n',t.default={frontmatter:t.frontmatter,content:t.content}}},t={},n=function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}(4265);module.exports=n})();